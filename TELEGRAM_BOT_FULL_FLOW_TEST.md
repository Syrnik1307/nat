# ü§ñ Telegram Bot - –ü–æ–ª–Ω–æ–µ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –§–ª–æ—É

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å ‚úÖ

**–ö–æ–¥ –≥–æ—Ç–æ–≤ –Ω–∞ 100%:**
- ‚úÖ `telegram_bot.py` - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (759 —Å—Ç—Ä–æ–∫)
- ‚úÖ `accounts/notifications.py` - —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≥–æ—Ç–æ–≤–∞
- ‚úÖ `homework/views.py` - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- ‚úÖ –ú–æ–¥–µ–ª–∏ NotificationSettings, NotificationLog —Å–æ–∑–¥–∞–Ω—ã

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:**
- üîë –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather (10 –º–∏–Ω—É—Ç)
- üîß –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ `.env` —Ñ–∞–π–ª—ã
- üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

---

## üéØ –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞

### 1.1. –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –≤ Telegram

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Telegram** –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É:** `/newbot`
3. **–í—ã–±–µ—Ä–∏—Ç–µ –∏–º—è –±–æ—Ç–∞:** `Teaching Panel Bot` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)
4. **–í—ã–±–µ—Ä–∏—Ç–µ username:** `teaching_panel_bot` (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `_bot` –∏ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** BotFather –≤—ã–¥–∞—Å—Ç —Ç–æ–∫–µ–Ω —Ñ–æ—Ä–º–∞—Ç–∞ `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`

### 1.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```
/setdescription - –ë–æ—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç Teaching Panel LMS
/setabouttext - Teaching Panel - —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏–µ–º —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –æ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏—è—Ö, —É—Ä–æ–∫–∞—Ö –∏ –æ—Ü–µ–Ω–∫–∞—Ö
/setuserpic - [–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∫–æ–Ω–∫—É –±–æ—Ç–∞]
```

---

## üîß –®–∞–≥ 2: –õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 2.1. –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ `.env`

**–§–∞–π–ª:** `teaching_panel/.env`

```bash
# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=–í–ê–®_–¢–û–ö–ï–ù_–û–¢_BOTFATHER
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
```

### 2.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–û—Ç–∫—Ä–æ–π—Ç–µ PowerShell –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```powershell
cd teaching_panel
..\venv\Scripts\Activate.ps1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ python-telegram-bot
pip show python-telegram-bot

# –ï—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:
pip install python-telegram-bot==20.7
```

### 2.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Django

```powershell
python manage.py shell
```

```python
from django.conf import settings
print(f"–¢–æ–∫–µ–Ω –±–æ—Ç–∞: {settings.TELEGRAM_BOT_TOKEN[:20]}...")  # –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ —Ç–æ–∫–µ–Ω–∞
exit()
```

---

## üöÄ –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ

### 3.1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Django —Å–µ—Ä–≤–µ—Ä

**–¢–µ—Ä–º–∏–Ω–∞–ª 1:**
```powershell
cd teaching_panel
..\venv\Scripts\Activate.ps1
python manage.py runserver
```

### 3.2. –ó–∞–ø—É—Å—Ç–∏—Ç—å Telegram –±–æ—Ç–∞

**–¢–µ—Ä–º–∏–Ω–∞–ª 2:**
```powershell
cd teaching_panel
..\venv\Scripts\Activate.ps1
python telegram_bot.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
INFO - Bot started successfully! Username: @teaching_panel_bot
INFO - Polling for updates...
```

---

## üîó –®–∞–≥ 4: –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞

### 4.1. –ü–æ–ª—É—á–∏—Ç—å invite code

1. –û—Ç–∫—Ä–æ–π—Ç–µ Django Admin: http://127.0.0.1:8000/admin/
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
3. **Accounts ‚Üí Users** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ `invite_code` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `TEST123`)

### 4.2. –°–≤—è–∑–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (`@teaching_panel_bot`)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"üîó –ü—Ä–∏–≤—è–∑–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç"**
5. –í–≤–µ–¥–∏—Ç–µ invite code: `TEST123`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –í–∞—à –∞–∫–∫–∞—É–Ω—Ç —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω!
–í—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç Teaching Panel.
```

### 4.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É –≤ –∞–¥–º–∏–Ω–∫–µ

1. Django Admin ‚Üí Accounts ‚Üí Users ‚Üí –≤–∞—à —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ç—É–¥–µ–Ω—Ç
2. –ü–æ–ª–µ `telegram_chat_id` –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `123456789`)

---

## üß™ –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ñ–ª–æ—É –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –î–ó

### 5.1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ **React frontend:** http://localhost:3000
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ **—É—á–∏—Ç–µ–ª—å** (—Å–æ–∑–¥–∞–π—Ç–µ —É—á–∏—Ç–µ–ª—è, –µ—Å–ª–∏ –Ω–µ—Ç)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Homework ‚Üí –°–æ–∑–¥–∞—Ç—å –î–ó**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ:** "–¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Telegram"
   - **–û–ø–∏—Å–∞–Ω–∏–µ:** "–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞"
   - **–ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ —É—Ä–æ–∫—É** (–≤—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–∫ —Å –≥—Ä—É–ø–ø–æ–π, –≥–¥–µ –µ—Å—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç)
5. –î–æ–±–∞–≤—å—Ç–µ –≤–æ–ø—Ä–æ—Å—ã:
   - SINGLE_CHOICE: "–ö–∞–∫–æ–π —è–∑—ã–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Teaching Panel?"
     - –í–∞—Ä–∏–∞–Ω—Ç—ã: "Python", "Java", "C++"
     - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π: "Python"
   - FILL_BLANKS: "Telegram –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ ____ API"
     - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: "Telegram"

### 5.2. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –î–ó

1. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üì¢ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"**
2. **–í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ preview (2 –≤–æ–ø—Ä–æ—Å–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã)
   - –ù–∞–∂–º–∏—Ç–µ **"–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **"–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ"**
- Badge –º–µ–Ω—è–µ—Ç—Å—è —Å **"–ß–µ—Ä–Ω–æ–≤–∏–∫"** –Ω–∞ **"–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ"**

### 5.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

**–í —Ç–µ—á–µ–Ω–∏–µ 5 —Å–µ–∫—É–Ω–¥ –≤ Telegram –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏:**

```
üìö –ù–æ–≤–æ–µ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ: –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Telegram
–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
–ì—Ä—É–ø–ø–∞: –¢–µ—Å—Ç–æ–≤–∞—è –≥—Ä—É–ø–ø–∞
–°—Ç–∞—Ä—Ç —É—Ä–æ–∫–∞: 29.11 10:00
–ó–∞–π–¥–∏—Ç–µ –≤ Teaching Panel, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏.
```

### 5.4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**Django Admin ‚Üí Accounts ‚Üí Notification Logs:**
- **–ü–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:**
  - `notification_type`: `new_homework`
  - `channel`: `telegram`
  - `status`: `sent` ‚úÖ
  - `message`: —Ç–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ï—Å–ª–∏ status = "failed":**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `error_message` –≤ –ª–æ–≥–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª —Å `telegram_bot.py` –Ω–∞ –æ—à–∏–±–∫–∏

### 5.5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –î–ó —Å—Ç—É–¥–µ–Ω—Ç–æ–º

1. –í—ã–π–¥–∏—Ç–µ –∏–∑ —É—á–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ **—Å—Ç—É–¥–µ–Ω—Ç** (—Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑–∞–Ω –≤ Telegram)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Homework ‚Üí "–¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Telegram"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Ç–≤–µ—Ç—ã –∏ –Ω–∞–∂–º–∏—Ç–µ **"–û—Ç–ø—Ä–∞–≤–∏—Ç—å"**

**–û–∂–∏–¥–∞–µ–º–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É—á–∏—Ç–µ–ª—é –≤ Telegram:**
```
üìù –°—Ç—É–¥–µ–Ω—Ç —Å–¥–∞–ª –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ
–°—Ç—É–¥–µ–Ω—Ç: –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤
–î–ó: –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Telegram
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤ Teaching Panel.
```

### 5.6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ –î–ó

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ **—É—á–∏—Ç–µ–ª—å**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Homework ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—ã**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–±–æ—Ç—É —Å—Ç—É–¥–µ–Ω—Ç–∞
4. –ü–æ—Å—Ç–∞–≤—å—Ç–µ –æ—Ü–µ–Ω–∫—É –∏ –Ω–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**

**–û–∂–∏–¥–∞–µ–º–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç—É –≤ Telegram:**
```
‚úÖ –í–∞—à–∞ –¥–æ–º–∞—à–Ω—è—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞!
–î–ó: –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Telegram
–û—Ü–µ–Ω–∫–∞: 10/10
–û—Ç–∫—Ä–æ–π—Ç–µ Teaching Panel –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.
```

---

## üåê –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ

### 6.1. –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```powershell
ssh tp
cd /var/www/teaching_panel
nano .env
```

**–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É:**
```bash
TELEGRAM_BOT_TOKEN=–í–ê–®_–¢–û–ö–ï–ù_–û–¢_BOTFATHER
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç—å: `Ctrl+O`, `Enter`, `Ctrl+X`

### 6.2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å python-telegram-bot

```bash
source venv/bin/activate
pip install python-telegram-bot==20.7
```

### 6.3. –°–æ–∑–¥–∞—Ç—å systemd service –¥–ª—è –±–æ—Ç–∞

```bash
sudo nano /etc/systemd/system/telegram-bot.service
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
```ini
[Unit]
Description=Teaching Panel Telegram Bot
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/var/www/teaching_panel
Environment="PATH=/var/www/teaching_panel/venv/bin"
ExecStart=/var/www/teaching_panel/venv/bin/python /var/www/teaching_panel/telegram_bot.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

### 6.4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª—É–∂–±—É

```bash
sudo systemctl daemon-reload
sudo systemctl enable telegram-bot
sudo systemctl start telegram-bot
sudo systemctl status telegram-bot
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
‚óè telegram-bot.service - Teaching Panel Telegram Bot
   Active: active (running)
```

### 6.5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

```bash
sudo journalctl -u telegram-bot -f
```

### 6.6. –†–µ—Å—Ç–∞—Ä—Ç Django (–ø—Ä–∏–º–µ–Ω–∏—Ç—å .env)

```bash
sudo systemctl restart gunicorn
```

---

## üß™ –®–∞–≥ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ production

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç: https://teaching-panel.ru (–∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω)
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —É—á–∏—Ç–µ–ª—å
3. –°–æ–∑–¥–∞–π—Ç–µ –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ –î–ó
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ –≤ Telegram**

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Telegram bot token is not configured"

**–†–µ—à–µ–Ω–∏–µ:**
```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env —Ñ–∞–π–ª
Get-Content teaching_panel\.env | Select-String "TELEGRAM"

# –ï—Å–ª–∏ –ø—É—Å—Ç–æ - –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
"TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω" | Add-Content teaching_panel\.env
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Missing telegram_chat_id"

**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç—É–¥–µ–Ω—Ç –Ω–µ —Å–≤—è–∑–∞–ª –∞–∫–∫–∞—É–Ω—Ç —á–µ—Ä–µ–∑ `/link`

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ù–∞–∂–º–∏—Ç–µ "üîó –ü—Ä–∏–≤—è–∑–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç"
4. –í–≤–µ–¥–∏—Ç–µ invite code

### –ü—Ä–æ–±–ª–µ–º–∞: "Telegram notifications disabled by user"

**–†–µ—à–µ–Ω–∏–µ:**
1. Django Admin ‚Üí Accounts ‚Üí Notification Settings
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—É–¥–µ–Ω—Ç–∞
3. –í–∫–ª—é—á–∏—Ç–µ `telegram_enabled` –∏ `notify_new_homework`

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```powershell
cd teaching_panel
..\venv\Scripts\Activate.ps1
python -c "from telegram_bot import BOT_TOKEN; print(BOT_TOKEN[:20])"
```

**–ï—Å–ª–∏ –≤—ã–≤–æ–¥–∏—Ç "YOUR_BOT_TOKEN_HERE":**
- –¢–æ–∫–µ–Ω –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω –∏–∑ .env
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` –≤ –ø–∞–ø–∫–µ `teaching_panel/`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: `TELEGRAM_BOT_TOKEN=—Ç–æ–∫–µ–Ω` (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤!)

### –ü—Ä–æ–±–ª–µ–º–∞: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –Ω–∞ production

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
ssh tp
sudo systemctl status telegram-bot
sudo journalctl -u telegram-bot -n 50
```

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "Invalid token":**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –≤ `/var/www/teaching_panel/.env` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –†–µ—Å—Ç–∞—Ä—Ç–Ω–∏—Ç–µ: `sudo systemctl restart telegram-bot`

---

## üìä –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [ ] –ë–æ—Ç —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ @BotFather
- [ ] –¢–æ–∫–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ `teaching_panel/.env`
- [ ] `python-telegram-bot==20.7` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] Django —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (`python manage.py runserver`)
- [ ] Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω (`python telegram_bot.py`)
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/start` –≤ Telegram
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ç—É–¥–µ–Ω—Ç —Å–≤—è–∑–∞–Ω —á–µ—Ä–µ–∑ `/link`
- [ ] –ü–æ–ª–µ `telegram_chat_id` –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –≤ –∞–¥–º–∏–Ω–∫–µ
- [ ] –î–ó —Å–æ–∑–¥–∞–Ω–æ –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ –≤ Telegram
- [ ] NotificationLog –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç status="sent"
- [ ] –°—Ç—É–¥–µ–Ω—Ç —Å–¥–∞–ª –î–ó ‚Üí —É—á–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- [ ] –£—á–∏—Ç–µ–ª—å –æ—Ü–µ–Ω–∏–ª –î–ó ‚Üí —Å—Ç—É–¥–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- [ ] –¢–æ–∫–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ production —Å–µ—Ä–≤–µ—Ä
- [ ] systemd service —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- [ ] Gunicorn —Ä–µ—Å—Ç–∞—Ä—Ç–Ω—É—Ç
- [ ] –ü—É–±–ª–∏–∫–∞—Ü–∏—è –î–ó –Ω–∞ production ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç

---

## üéâ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

1. **–õ–æ–∫–∞–ª—å–Ω–æ:**
   - ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã
   - ‚úÖ –ü—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –î–ó —Å—Ç—É–¥–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
   - ‚úÖ –ü—Ä–∏ —Å–¥–∞—á–µ –î–ó —É—á–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   - ‚úÖ –ü—Ä–∏ –æ—Ü–µ–Ω–∫–µ –î–ó —Å—Ç—É–¥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

2. **–ù–∞ production:**
   - ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ systemd —Å–ª—É–∂–±–∞
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ç—Å—è –ø—Ä–∏ —Å–±–æ—è—Ö
   - ‚úÖ –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - ‚úÖ NotificationLog –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
   - ‚úÖ –ú–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å failed —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø—Ä–∏—á–∏–Ω—ã

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–±—Ö—É–∫ –¥–ª—è Telegram (–≤–º–µ—Å—Ç–æ polling)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/homework` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –î–ó –ø—Ä—è–º–æ –≤ –±–æ—Ç–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å daily digest —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–û—Ç–∫—Ä—ã—Ç—å –î–ó")

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 29.11.2024  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–í–µ—Ä—Å–∏—è:** 1.0
