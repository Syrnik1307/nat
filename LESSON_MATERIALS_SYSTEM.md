# –°–∏—Å—Ç–µ–º–∞ —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç–µ–æ—Ä–∏—é (–¥–ª—è —á—Ç–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —É—Ä–æ–∫–æ–º) –∏ –∫–æ–Ω—Å–ø–µ–∫—Ç—ã (–ø–æ—Å–ª–µ —É—Ä–æ–∫–∞), –∞ —Ç–∞–∫–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫–∞–∫–∏–µ —É—á–µ–Ω–∏–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤**
   - –¢–µ–æ—Ä–∏—è (üìñ) - –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –ø–µ—Ä–µ–¥ —É—Ä–æ–∫–æ–º
   - –ö–æ–Ω—Å–ø–µ–∫—Ç—ã (üìù) - –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –ø–æ—Å–ª–µ —É—Ä–æ–∫–∞
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Å—ã–ª–æ–∫ –Ω–∞ Google Drive, Dropbox –∏ –¥—Ä—É–≥–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

2. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
   - –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –∫–∞–∂–¥–æ–≥–æ —É—á–µ–Ω–∏–∫–∞ (–æ–¥–∏–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª)
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –º–∞—Ç–µ—Ä–∏–∞–ª—É –∏ —É—á–µ–Ω–∏–∫—É

3. **–ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**
   - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–æ—Ä–∏–∏ –∏ –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã "–ù–æ–≤–æ–µ" –∏ "–ü—Ä–æ—á–∏—Ç–∞–Ω–æ"
   - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

---

## Backend

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### LessonMaterial

```python
class LessonMaterial(models.Model):
    """–£—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∫ —É—Ä–æ–∫—É"""
    lesson = ForeignKey(Lesson)  # –°–≤—è–∑—å —Å —É—Ä–æ–∫–æ–º
    material_type = CharField  # 'theory' –∏–ª–∏ 'notes'
    title = CharField(max_length=200)
    description = TextField(blank=True)
    file_url = URLField  # –°—Å—ã–ª–∫–∞ –Ω–∞ Google Drive –∏–ª–∏ –¥—Ä—É–≥–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    file_name = CharField(max_length=200)
    file_size_bytes = BigIntegerField
    uploaded_by = ForeignKey(CustomUser)
    uploaded_at = DateTimeField(auto_now_add=True)
    views_count = IntegerField(default=0)
    
    @property
    def file_size_mb(self):
        return self.file_size_bytes / (1024 ** 2)
```

**–¢–∏–ø—ã –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:**
- `theory` - –¢–µ–æ—Ä–∏—è (–ø–µ—Ä–µ–¥ —É—Ä–æ–∫–æ–º)
- `notes` - –ö–æ–Ω—Å–ø–µ–∫—Ç (–ø–æ—Å–ª–µ —É—Ä–æ–∫–∞)

#### MaterialView

```python
class MaterialView(models.Model):
    """–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤"""
    material = ForeignKey(LessonMaterial)
    student = ForeignKey(CustomUser, limit_choices_to={'role': 'student'})
    viewed_at = DateTimeField(auto_now_add=True)
    duration_seconds = IntegerField(default=0)
    completed = BooleanField(default=False)
    
    class Meta:
        unique_together = [['material', 'student']]  # –û–¥–∏–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞ —É—á–µ–Ω–∏–∫–∞
```

### API Endpoints

#### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å)

```http
POST /schedule/api/lessons/<lesson_id>/materials/upload/
Content-Type: application/json

{
    "material_type": "theory",  # –∏–ª–∏ "notes"
    "title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ –∞–ª–≥–µ–±—Ä—É",
    "description": "–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è",
    "file_url": "https://drive.google.com/file/d/...",
    "file_name": "algebra_intro.pdf",
    "file_size_bytes": 1024000
}
```

**–û—Ç–≤–µ—Ç 201:**
```json
{
    "id": 42,
    "lesson_id": 15,
    "material_type": "theory",
    "title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ –∞–ª–≥–µ–±—Ä—É",
    "description": "–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è",
    "file_url": "https://drive.google.com/file/d/...",
    "file_name": "algebra_intro.pdf",
    "file_size_bytes": 1024000,
    "file_size_mb": 1.0,
    "uploaded_by": {
        "id": 3,
        "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
        "email": "teacher@example.com"
    },
    "uploaded_at": "2025-01-22T14:30:00Z",
    "views_count": 0
}
```

#### 2. –°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —É—Ä–æ–∫–∞

```http
GET /schedule/api/lessons/<lesson_id>/materials/?material_type=theory
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `material_type` (optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É: `theory` –∏–ª–∏ `notes`

**–û—Ç–≤–µ—Ç 200 (–¥–ª—è —É—á–µ–Ω–∏–∫–∞):**
```json
{
    "lesson": {
        "id": 15,
        "title": "–£—Ä–æ–∫ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏",
        "teacher": {
            "id": 3,
            "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
        }
    },
    "materials": [
        {
            "id": 42,
            "material_type": "theory",
            "material_type_display": "–¢–µ–æ—Ä–∏—è (–ø–µ—Ä–µ–¥ —É—Ä–æ–∫–æ–º)",
            "title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ –∞–ª–≥–µ–±—Ä—É",
            "description": "...",
            "file_url": "https://...",
            "file_name": "algebra_intro.pdf",
            "file_size_mb": 1.0,
            "views_count": 5,
            "is_viewed": true  // –¢–æ–ª—å–∫–æ –¥–ª—è —É—á–µ–Ω–∏–∫–∞
        }
    ],
    "count": 1
}
```

#### 3. –î–µ—Ç–∞–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞

```http
GET /schedule/api/materials/<material_id>/
```

**–û—Ç–≤–µ—Ç 200:**
```json
{
    "id": 42,
    "lesson": {
        "id": 15,
        "title": "–£—Ä–æ–∫ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏",
        "start_time": "2025-01-22T15:00:00Z",
        "teacher": {
            "id": 3,
            "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
        }
    },
    "material_type": "theory",
    "title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ –∞–ª–≥–µ–±—Ä—É",
    "file_url": "https://...",
    "views_count": 5,
    "view_info": {  // –¢–æ–ª—å–∫–æ –¥–ª—è —É—á–µ–Ω–∏–∫–∞
        "viewed_at": "2025-01-22T14:35:00Z",
        "duration_seconds": 120,
        "completed": false
    }
}
```

#### 4. –û—Ç—Å–ª–µ–¥–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä (–£—á–µ–Ω–∏–∫)

```http
POST /schedule/api/materials/<material_id>/view/
Content-Type: application/json

{
    "duration_seconds": 120,  // optional
    "completed": true  // optional
}
```

**–û—Ç–≤–µ—Ç 200:**
```json
{
    "material_id": 42,
    "student_id": 10,
    "viewed_at": "2025-01-22T14:35:00Z",
    "duration_seconds": 120,
    "completed": true,
    "is_first_view": true  // true –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä, false –µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
}
```

#### 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å)

```http
GET /schedule/api/materials/<material_id>/views/
```

**–û—Ç–≤–µ—Ç 200:**
```json
{
    "material": {
        "id": 42,
        "title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ –∞–ª–≥–µ–±—Ä—É",
        "material_type": "theory",
        "views_count": 5
    },
    "statistics": {
        "total_students": 10,
        "viewed_count": 5,
        "not_viewed_count": 5,
        "completion_count": 2,
        "view_rate": 50.0,
        "completion_rate": 20.0
    },
    "students": [
        {
            "student_id": 10,
            "student_name": "–ê–Ω–Ω–∞ –°–º–∏—Ä–Ω–æ–≤–∞",
            "student_email": "anna@example.com",
            "has_viewed": true,
            "viewed_at": "2025-01-22T14:35:00Z",
            "duration_seconds": 120,
            "completed": true
        },
        {
            "student_id": 11,
            "student_name": "–ü–µ—Ç—Ä –ò–≤–∞–Ω–æ–≤",
            "student_email": "peter@example.com",
            "has_viewed": false,
            "viewed_at": null,
            "duration_seconds": 0,
            "completed": false
        }
    ]
}
```

#### 6. –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Ä–æ–∫–∞ (–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å)

```http
GET /schedule/api/lessons/<lesson_id>/materials/statistics/
```

**–û—Ç–≤–µ—Ç 200:**
```json
{
    "lesson": {
        "id": 15,
        "title": "–£—Ä–æ–∫ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏",
        "start_time": "2025-01-22T15:00:00Z"
    },
    "summary": {
        "total_students": 10,
        "total_materials": 5,
        "theory_materials_count": 3,
        "notes_materials_count": 2,
        "total_views": 25,
        "avg_views_per_material": 5.0
    },
    "students": [
        {
            "student_id": 10,
            "student_name": "–ê–Ω–Ω–∞ –°–º–∏—Ä–Ω–æ–≤–∞",
            "student_email": "anna@example.com",
            "theory_viewed": 2,
            "theory_total": 3,
            "theory_completed": 1,
            "notes_viewed": 1,
            "notes_total": 2,
            "notes_completed": 0,
            "total_views": 3
        }
    ]
}
```

#### 7. –£–¥–∞–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å)

```http
DELETE /schedule/api/materials/<material_id>/delete/
```

**–û—Ç–≤–µ—Ç 200:**
```json
{
    "message": "–ú–∞—Ç–µ—Ä–∏–∞–ª \"–í–≤–µ–¥–µ–Ω–∏–µ –≤ –∞–ª–≥–µ–±—Ä—É\" —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω",
    "deleted_id": 42
}
```

---

## Frontend

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. LessonMaterialsManager (–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `frontend/src/modules/Teacher/LessonMaterialsManager.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–º–∞—Ç–µ—Ä–∏–∞–ª—ã, –ø—Ä–æ—Å–º–æ—Ç—Ä—ã, —É—á–µ–Ω–∏–∫–∏)
- –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- –°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Ç–µ–æ—Ä–∏—é/–∫–æ–Ω—Å–ø–µ–∫—Ç—ã
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –º–∞—Ç–µ—Ä–∏–∞–ª—É (–∫—Ç–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª)
- –£–¥–∞–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```jsx
import LessonMaterialsManager from './modules/Teacher/LessonMaterialsManager';

<LessonMaterialsManager 
    lessonId={15}
    lessonTitle="–£—Ä–æ–∫ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏"
    onClose={() => setShowMaterials(false)}
/>
```

#### 2. LessonMaterialsViewer (–£—á–µ–Ω–∏–∫)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `frontend/src/modules/Student/LessonMaterialsViewer.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–æ—Ä–∏–∏ –∏ –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã "–ù–æ–≤–æ–µ" –∏ "–ü—Ä–æ—á–∏—Ç–∞–Ω–æ"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø—Ä–∏ –∫–ª–∏–∫–µ
- –û—Ç–∫—Ä—ã—Ç–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```jsx
import LessonMaterialsViewer from './modules/Student/LessonMaterialsViewer';

<LessonMaterialsViewer 
    lessonId={15}
    lessonTitle="–£—Ä–æ–∫ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏"
    onClose={() => setShowMaterials(false)}
/>
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å/—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫—É —É—Ä–æ–∫–∞

**–î–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è (TeacherSchedulePage):**

```jsx
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —É—Ä–æ–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å:
const [showMaterials, setShowMaterials] = useState(false);

// –ö–Ω–æ–ø–∫–∞ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —É—Ä–æ–∫–∞:
<button 
    className="btn-materials"
    onClick={() => setShowMaterials(true)}
>
    üìö –ú–∞—Ç–µ—Ä–∏–∞–ª—ã ({lesson.materials_count || 0})
</button>

// –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ:
{showMaterials && (
    <LessonMaterialsManager
        lessonId={lesson.id}
        lessonTitle={lesson.title}
        onClose={() => setShowMaterials(false)}
    />
)}
```

**–î–ª—è —É—á–µ–Ω–∏–∫–∞ (StudentDashboard):**

```jsx
// –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –Ω–æ —Å LessonMaterialsViewer:
{showMaterials && (
    <LessonMaterialsViewer
        lessonId={lesson.id}
        lessonTitle={lesson.title}
        onClose={() => setShowMaterials(false)}
    />
)}
```

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

–î–æ–±–∞–≤–∏—Ç—å –≤ API —É—Ä–æ–∫–∞ –ø–æ–ª–µ `unread_materials_count`:

```python
# –í serializer —É—Ä–æ–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å:
def get_unread_materials_count(self, obj):
    """–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —É—á–µ–Ω–∏–∫–∞"""
    if not hasattr(self.context.get('request'), 'user'):
        return 0
    
    user = self.context['request'].user
    if user.role != 'student':
        return 0
    
    # –í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —É—Ä–æ–∫–∞
    all_materials = LessonMaterial.objects.filter(lesson=obj)
    
    # –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
    viewed_materials = MaterialView.objects.filter(
        material__lesson=obj,
        student=user
    ).values_list('material_id', flat=True)
    
    return all_materials.exclude(id__in=viewed_materials).count()
```

–ó–∞—Ç–µ–º –ø–æ–∫–∞–∑–∞—Ç—å –±–µ–π–¥–∂:

```jsx
{lesson.unread_materials_count > 0 && (
    <span className="unread-badge">{lesson.unread_materials_count} –Ω–æ–≤—ã—Ö</span>
)}
```

---

## –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

- **–¢–µ–æ—Ä–∏—è:** –°–∏–Ω–∏–π (`#3b82f6`) - –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –ø–µ—Ä–µ–¥ —É—Ä–æ–∫–æ–º
- **–ö–æ–Ω—Å–ø–µ–∫—Ç—ã:** –ó–µ–ª–µ–Ω—ã–π (`#10b981`) - –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –ø–æ—Å–ª–µ —É—Ä–æ–∫–∞
- **–ü—Ä–æ—á–∏—Ç–∞–Ω–æ:** –ó–µ–ª–µ–Ω—ã–π —Å –≥–∞–ª–æ—á–∫–æ–π
- **–ù–æ–≤–æ–µ:** –ñ–µ–ª—Ç—ã–π —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π (`#fbbf24`)

### –ê–Ω–∏–º–∞—Ü–∏–∏

- –ü–æ—è–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞: `fadeIn` + `slideUp`
- –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã: `pulse` (–ø—É–ª—å—Å–∞—Ü–∏—è)
- –ù–æ–≤—ã–π –±–µ–π–¥–∂: `bounce` (–ø–æ–¥–ø—Ä—ã–≥–∏–≤–∞–Ω–∏–µ)
- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã: `translateY` + `box-shadow`

---

## –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /var/www/teaching_panel
source venv/bin/activate
python manage.py makemigrations schedule
python manage.py migrate schedule
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π

```python
# Django shell
python manage.py shell

from schedule.models import LessonMaterial, MaterialView

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã
LessonMaterial.objects.count()
MaterialView.objects.count()
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

```python
from schedule.models import Lesson, LessonMaterial, CustomUser

lesson = Lesson.objects.first()
teacher = CustomUser.objects.filter(role='teacher').first()

# –¢–µ–æ—Ä–∏—è
LessonMaterial.objects.create(
    lesson=lesson,
    material_type='theory',
    title='–í–≤–µ–¥–µ–Ω–∏–µ –≤ —Ç–µ–º—É',
    description='–ë–∞–∑–æ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è',
    file_url='https://drive.google.com/file/d/example123',
    file_name='intro.pdf',
    file_size_bytes=1024000,
    uploaded_by=teacher
)

# –ö–æ–Ω—Å–ø–µ–∫—Ç
LessonMaterial.objects.create(
    lesson=lesson,
    material_type='notes',
    title='–ö–æ–Ω—Å–ø–µ–∫—Ç —É—Ä–æ–∫–∞',
    description='–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã —É—Ä–æ–∫–∞',
    file_url='https://drive.google.com/file/d/example456',
    file_name='notes.pdf',
    file_size_bytes=2048000,
    uploaded_by=teacher
)
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
curl -X POST http://localhost:8000/schedule/api/lessons/15/materials/upload/ \
  -H "Content-Type: application/json" \
  -H "Cookie: sessionid=..." \
  -d '{
    "material_type": "theory",
    "title": "–¢–µ—Å—Ç–æ–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª",
    "file_url": "https://example.com/file.pdf",
    "file_name": "test.pdf",
    "file_size_bytes": 1024000
  }'

# –°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
curl http://localhost:8000/schedule/api/lessons/15/materials/ \
  -H "Cookie: sessionid=..."

# –û—Ç—Å–ª–µ–¥–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä
curl -X POST http://localhost:8000/schedule/api/materials/42/view/ \
  -H "Content-Type: application/json" \
  -H "Cookie: sessionid=..." \
  -d '{}'

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl http://localhost:8000/schedule/api/materials/42/views/ \
  -H "Cookie: sessionid=..."
```

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞–ø—Ä—è–º—É—é
–í–º–µ—Å—Ç–æ —Å—Å—ã–ª–æ–∫ –Ω–∞ Google Drive, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä—è–º—É—é –∑–∞–≥—Ä—É–∑–∫—É:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Django FileField
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Drive API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ (PDF, DOCX, PPTX)

### 2. –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π PDF viewer
–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä PDF –ø—Ä—è–º–æ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ:
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `react-pdf`
- –ü–ª–µ–µ—Ä –¥–ª—è –≤–∏–¥–µ–æ (–µ—Å–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª - –≤–∏–¥–µ–æ)

### 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–∞–º –æ –Ω–æ–≤—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö:
- Email –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–µ–æ—Ä–∏–∏ (–∑–∞ –¥–µ–Ω—å –¥–æ —É—Ä–æ–∫–∞)
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- SMS —á–µ—Ä–µ–∑ Twilio

### 4. –î–µ–¥–ª–∞–π–Ω—ã
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ–¥–ª–∞–π–Ω–æ–≤ –¥–ª—è —á—Ç–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:
- "–ü—Ä–æ—á–∏—Ç–∞—Ç—å –¥–æ 20.01.2025 15:00"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Å—Ä–æ—á–∫–∏ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ

### 5. –ö–≤–∏–∑—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞–Ω–∏–π
–ü–æ—Å–ª–µ —á—Ç–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ - –º–∏–Ω–∏-—Ç–µ—Å—Ç:
- 3-5 –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ç–µ–æ—Ä–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

---

## Troubleshooting

### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —É—Ä–æ–∫—É (—Ç–æ–ª—å–∫–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —É—Ä–æ–∫–∞ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å URL (–¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å http:// –∏–ª–∏ https://)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç JSON –≤ –∑–∞–ø—Ä–æ—Å–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä—ã –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è
1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - —É—á–µ–Ω–∏–∫ (role='student')
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å (material + student) - –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∂–µ –∑–∞–ø–∏—Å–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ–≤–µ—Ä–Ω–∞—è
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑—å —É—Ä–æ–∫–∞ —Å –≥—Ä—É–ø–ø–æ–π –∏–ª–∏ —É—á–µ–Ω–∏–∫–æ–º
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É—á–µ–Ω–∏–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –≥—Ä—É–ø–ø—É
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CASCADE –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (views –¥–æ–ª–∂–Ω—ã —É–¥–∞–ª—è—Ç—å—Å—è)

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∞ —É—á–µ–Ω–∏–∫–∏ –≤–∏–¥—è—Ç –∫—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ—Å—Ç–∏. –í—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—é –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
