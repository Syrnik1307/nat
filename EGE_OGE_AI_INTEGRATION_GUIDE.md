# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AI-–ø—Ä–æ–≤–µ—Ä–∫–∏ –ï–ì–≠/–û–ì–≠ - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–û–±–∑–æ—Ä —Ä–µ—à–µ–Ω–∏—è](#–æ–±–∑–æ—Ä-—Ä–µ—à–µ–Ω–∏—è)
2. [–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—ç–∫–æ–Ω–æ–º–∏–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
4. [–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#–ø–æ—à–∞–≥–æ–≤–∞—è-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
5. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
6. [–û–±—É—á–µ–Ω–∏–µ AI —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –§–ò–ü–ò](#–æ–±—É—á–µ–Ω–∏–µ-ai-—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º-—Ñ–∏–ø–∏)
7. [–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ](#–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üéØ –û–±–∑–æ—Ä —Ä–µ—à–µ–Ω–∏—è

### –ß—Ç–æ –º—ã –¥–µ–ª–∞–µ–º
–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π AI-–∞–≥–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ï–ì–≠/–û–ì–≠ (–≤—Ç–æ—Ä–æ–π —á–∞—Å—Ç–∏ —ç–∫–∑–∞–º–µ–Ω–æ–≤) —Å **—Ñ–æ–∫—É—Å–æ–º –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —ç–∫–æ–Ω–æ–º–∏—é** –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –§–ò–ü–ò.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º –§–ò–ü–ò** (K1-K12 –¥–ª—è –ï–ì–≠ –†—É—Å—Å–∫–∏–π, –∏ —Ç.–¥.)
- ‚úÖ **–°—É–ø–µ—Ä-–¥–µ—à–µ–≤–æ**: ~0.015-0.03‚ÇΩ –∑–∞ —Ä–∞–±–æ—Ç—É (–≤ 100+ —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ GPT-4)
- ‚úÖ **–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –∫–ª–∞—Å—Å –∏–∑ 30 —É—á–µ–Ω–∏–∫–æ–≤ = ~0.45-0.90‚ÇΩ
- ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ = 0‚ÇΩ
- ‚úÖ **–ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫** —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É homework –±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è

---

## üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –º–æ–¥–µ–ª–µ–π (–¥–ª—è —Å–æ—á–∏–Ω–µ–Ω–∏—è ~2000 —Å–∏–º–≤–æ–ª–æ–≤)

| –ú–æ–¥–µ–ª—å | –°—Ç–æ–∏–º–æ—Å—Ç—å/—Ä–∞–±–æ—Ç–∞ | –°—Ç–æ–∏–º–æ—Å—Ç—å/30 —Ä–∞–±–æ—Ç | –ö–∞—á–µ—Å—Ç–≤–æ |
|--------|------------------|---------------------|----------|
| **DeepSeek Chat** ü•á | **0.015‚ÇΩ** | **0.45‚ÇΩ** | –û—Ç–ª–∏—á–Ω–æ |
| DeepSeek Reasoner | 0.06‚ÇΩ | 1.80‚ÇΩ | –í–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ |
| Mistral Small | 0.11‚ÇΩ | 3.30‚ÇΩ | –û—Ç–ª–∏—á–Ω–æ |
| GPT-4o-mini | 0.21‚ÇΩ | 6.30‚ÇΩ | –•–æ—Ä–æ—à–æ |
| GPT-4o | 3.50‚ÇΩ | 105‚ÇΩ | –ò–∑–±—ã—Ç–æ—á–Ω–æ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ–º **DeepSeek Chat** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é –º–æ–¥–µ–ª—å (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ).

### –†–µ–∞–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã –¥–ª—è —à–∫–æ–ª—ã

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ö–ª–∞—Å—Å –∏–∑ 30 —É—á–µ–Ω–∏–∫–æ–≤ –ø–∏—à–µ—Ç —Å–æ—á–∏–Ω–µ–Ω–∏–µ –ï–ì–≠**
```
–ú–æ–¥–µ–ª—å: DeepSeek Chat
–°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞: 2000 —Å–∏–º–≤–æ–ª–æ–≤
–°—Ç–æ–∏–º–æ—Å—Ç—å: 30 √ó 0.015‚ÇΩ = 0.45‚ÇΩ

–í—Ä–µ–º—è —É—á–∏—Ç–µ–ª—è –±–µ–∑ AI: 30 √ó 15 –º–∏–Ω = 7.5 —á–∞—Å–æ–≤
–í—Ä–µ–º—è —É—á–∏—Ç–µ–ª—è —Å AI: 30 √ó 3 –º–∏–Ω = 1.5 —á–∞—Å–æ–≤ (—Ç–æ–ª—å–∫–æ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏: 6 —á–∞—Å–æ–≤ (80%)
```

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ï–ì–≠, 3 –ø—Ä–æ–±–Ω—ã—Ö —Å–æ—á–∏–Ω–µ–Ω–∏—è**
```
–£—á–µ–Ω–∏–∫–æ–≤: 30
–ü—Ä–æ–±–Ω—ã—Ö —Ä–∞–±–æ—Ç: 3
–†–∞–±–æ—Ç –≤—Å–µ–≥–æ: 90

–°—Ç–æ–∏–º–æ—Å—Ç—å: 90 √ó 0.015‚ÇΩ = 1.35‚ÇΩ
–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏: 18 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã —É—á–∏—Ç–µ–ª—è
```

**–°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–µ–ø–µ—Ç–∏—Ç–æ—Ä —Å 10 —É—á–µ–Ω–∏–∫–∞–º–∏ –≤ –º–µ—Å—è—Ü**
```
–£—á–µ–Ω–∏–∫–æ–≤: 10
–†–∞–±–æ—Ç –≤ –º–µ—Å—è—Ü: 40 (–ø–æ 4 —Ä–∞–±–æ—Ç—ã –Ω–∞ —É—á–µ–Ω–∏–∫–∞)
–°—Ç–æ–∏–º–æ—Å—Ç—å: 40 √ó 0.015‚ÇΩ = 0.60‚ÇΩ/–º–µ—Å—è—Ü
–°—Ç–æ–∏–º–æ—Å—Ç—å –≤ –≥–æ–¥: 7.20‚ÇΩ

–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏: ~10 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü = 120 —á–∞—Å–æ–≤/–≥–æ–¥
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç

**1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)**
```python
# –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: 0.015‚ÇΩ
result = grade_ege_essay(source, answer, use_cache=True)

# –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≥–æ –∂–µ –æ—Ç–≤–µ—Ç–∞: 0‚ÇΩ (–∏–∑ –∫—ç—à–∞)
result = grade_ege_essay(source, answer, use_cache=True)
```

**2. –°–∂–∞—Ç—ã–µ –ø—Ä–æ–º–ø—Ç—ã (-40% —Ç–æ–∫–µ–Ω–æ–≤)**
```python
# –ü–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç: ~1000 —Ç–æ–∫–µ–Ω–æ–≤
build_prompt(..., optimized=False)

# –°–∂–∞—Ç—ã–π –ø—Ä–æ–º–ø—Ç: ~600 —Ç–æ–∫–µ–Ω–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
build_prompt(..., optimized=True)
```

**3. Batch-–ø—Ä–æ–≤–µ—Ä–∫–∞ (-20% –∑–∞ —Å—á–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Å—å –∫–ª–∞—Å—Å –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
results = service.grade_batch_sync(works, batch_size=30)
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Frontend (React)                         ‚îÇ
‚îÇ  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º               ‚îÇ
‚îÇ  - –ü–æ–∫–∞–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ –æ—à–∏–±–æ–∫ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π                      ‚îÇ
‚îÇ  - UI –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è AI –ø—Ä–æ–≤–µ—Ä–∫–∏                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ HTTP API
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ               Django Backend (homework app)                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ HomeworkSubmissionViewSet (views.py)                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - Endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ AI: /check-with-ai/          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Å–¥–∞—á–µ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞)             ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ              ‚îÇ                                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ ExamAIGradingService (exam_ai_grading_service.py)    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ï–ì–≠/–û–ì–≠                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –†–∞–±–æ—Ç–∞ —Å –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ –§–ò–ü–ò                           ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤                            ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ              ‚îÇ                                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ AI Grading Examples (ai_grading_examples.py)         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –ö—Ä–∏—Ç–µ—Ä–∏–∏ –§–ò–ü–ò (EGE_CRITERIA, OGE_CRITERIA)        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞–Ω–∏–π                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤           ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ              ‚îÇ                                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Base AIGradingService (ai_grading_service.py)        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è DeepSeek API                      ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤—ã–∑–æ–≤–∞ AI                          ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ HTTPS API
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    DeepSeek API                              ‚îÇ
‚îÇ  - deepseek-chat (–æ—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å)                          ‚îÇ
‚îÇ  - deepseek-reasoner (–¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤)                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥–µ–ª–µ–π)

```python
# homework/models.py

class Question(models.Model):
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è...
    
    # –ù–û–í–´–ï –ü–û–õ–Ø –¥–ª—è –ï–ì–≠/–û–ì–≠
    exam_type = models.CharField(
        max_length=10,
        choices=[('EGE', '–ï–ì–≠'), ('OGE', '–û–ì–≠'), ('NONE', '–û–±—ã—á–Ω–æ–µ')],
        default='NONE'
    )
    exam_task_code = models.CharField(
        max_length=50,
        blank=True,
        help_text="–ö–æ–¥ –∑–∞–¥–∞–Ω–∏—è: russian_27, math_profile_19, social_29, etc."
    )
    enable_ai_grading = models.BooleanField(
        default=False,
        help_text="–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é AI –ø—Ä–æ–≤–µ—Ä–∫—É"
    )


class Answer(models.Model):
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è...
    
    # –ù–û–í–´–ï –ü–û–õ–Ø –¥–ª—è AI –ø—Ä–æ–≤–µ—Ä–∫–∏
    ai_checked = models.BooleanField(default=False)
    ai_total_score = models.IntegerField(null=True, blank=True)
    ai_criteria_scores = models.JSONField(
        null=True, blank=True,
        help_text="–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏: {K1: {score: 1, reasoning: ...}, ...}"
    )
    ai_feedback = models.TextField(blank=True)
    ai_errors_found = models.JSONField(
        null=True, blank=True,
        help_text="–ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫: [{type, fragment, correction}, ...]"
    )
    ai_cost_rubles = models.DecimalField(
        max_digits=10, decimal_places=4,
        null=True, blank=True
    )
    
    # –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —É—á–∏—Ç–µ–ª—è (–º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç AI)
    teacher_override = models.BooleanField(default=False)
    teacher_notes = models.TextField(
        blank=True,
        help_text="–ü–æ—á–µ–º—É —É—á–∏—Ç–µ–ª—å –∏–∑–º–µ–Ω–∏–ª –æ—Ü–µ–Ω–∫—É AI"
    )
```

---

## üîß –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –®–∞–≥ 1: –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

```bash
# –°–æ–∑–¥–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
cd teaching_panel
python manage.py makemigrations homework --name add_ai_grading_fields

# –ü—Ä–∏–º–µ–Ω—è–µ–º
python manage.py migrate homework
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª—è–µ–º API endpoint –¥–ª—è AI –ø—Ä–æ–≤–µ—Ä–∫–∏

```python
# homework/views.py

from rest_framework.decorators import action
from rest_framework.response import Response
from rest_framework import status

from .exam_ai_grading_service import ExamAIGradingService, grade_ege_essay
from .ai_grading_examples import EGE_CRITERIA, OGE_CRITERIA


class HomeworkSubmissionViewSet(viewsets.ModelViewSet):
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥...
    
    @action(detail=True, methods=['post'], url_path='check-with-ai')
    def check_with_ai(self, request, pk=None):
        """
        –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–≤–µ—Ç —Å –ø–æ–º–æ—â—å—é AI
        
        POST /api/homework/submissions/{id}/check-with-ai/
        
        Request body: {} (–ø—É—Å—Ç–æ–π, –±–µ—Ä–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ submission)
        
        Response: {
            "success": true,
            "total_score": 16,
            "max_score": 25,
            "criteria_scores": {"K1": {"score": 1, "reasoning": "..."}, ...},
            "summary": "...",
            "strengths": ["..."],
            "weaknesses": ["..."],
            "examples_of_errors": [{"type": "...", "fragment": "...", "correction": "..."}],
            "cost_rubles": "0.0152",
            "model_used": "deepseek-chat"
        }
        """
        submission = self.get_object()  # Answer instance
        question = submission.question
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –≤–æ–ø—Ä–æ—Å —Å –≤–∫–ª—é—á–µ–Ω–Ω–æ–π AI –ø—Ä–æ–≤–µ—Ä–∫–æ–π
        if not question.enable_ai_grading:
            return Response(
                {"error": "AI –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞ –¥–ª—è —ç—Ç–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞"},
                status=status.HTTP_400_BAD_REQUEST
            )
        
        if question.exam_type not in ['EGE', 'OGE']:
            return Response(
                {"error": "AI –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –ï–ì–≠/–û–ì–≠ –∑–∞–¥–∞–Ω–∏–π"},
                status=status.HTTP_400_BAD_REQUEST
            )
        
        if not question.exam_task_code:
            return Response(
                {"error": "–ù–µ —É–∫–∞–∑–∞–Ω –∫–æ–¥ –∑–∞–¥–∞–Ω–∏—è (exam_task_code)"},
                status=status.HTTP_400_BAD_REQUEST
            )
        
        # –ü–æ–ª—É—á–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è –∏ –æ—Ç–≤–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞
        source_text = question.question_text  # –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ —Ç—É—Ç –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
        student_answer = submission.answer_text
        
        if not student_answer or not student_answer.strip():
            return Response(
                {"error": "–û—Ç–≤–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ –ø—É—Å—Ç–æ–π"},
                status=status.HTTP_400_BAD_REQUEST
            )
        
        try:
            # –í—ã–∑—ã–≤–∞–µ–º AI –ø—Ä–æ–≤–µ—Ä–∫—É
            service = ExamAIGradingService(provider='deepseek', model='deepseek-chat')
            
            result = service.grade_exam_work_sync(
                source_text=source_text,
                student_answer=student_answer,
                criteria_key=question.exam_task_code,
                exam_type='–ï–ì–≠' if question.exam_type == 'EGE' else '–û–ì–≠',
                subject=question.homework.subject or '–†—É—Å—Å–∫–∏–π —è–∑—ã–∫',
                use_cache=True
            )
            
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç AI –≤ –ë–î
            submission.ai_checked = True
            submission.ai_total_score = result.total_score
            submission.ai_criteria_scores = result.criteria_scores
            submission.ai_feedback = result.summary
            submission.ai_errors_found = result.examples_of_errors
            submission.ai_cost_rubles = result.cost_rubles
            
            # –ï—Å–ª–∏ —É—á–∏—Ç–µ–ª—å –µ—â–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª - —Å—Ç–∞–≤–∏–º AI –æ—Ü–µ–Ω–∫—É –∫–∞–∫ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é
            if submission.status == 'submitted':
                submission.status = 'ai_checked'
                submission.score = result.total_score  # –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
            
            submission.save()
            
            # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            return Response({
                "success": True,
                "total_score": result.total_score,
                "max_score": result.max_score,
                "criteria_scores": result.criteria_scores,
                "summary": result.summary,
                "strengths": result.strengths,
                "weaknesses": result.weaknesses,
                "examples_of_errors": result.examples_of_errors,
                "cost_rubles": str(result.cost_rubles),
                "model_used": result.model_used,
                "tokens_used": result.tokens_used
            })
            
        except Exception as e:
            logger.exception(f"AI grading failed for submission {pk}")
            return Response(
                {"error": f"–û—à–∏–±–∫–∞ AI –ø—Ä–æ–≤–µ—Ä–∫–∏: {str(e)}"},
                status=status.HTTP_500_INTERNAL_SERVER_ERROR
            )
    
    @action(detail=False, methods=['post'], url_path='batch-check-ai')
    def batch_check_ai(self, request):
        """
        –ü–∞–∫–µ—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤
        
        POST /api/homework/submissions/batch-check-ai/
        Body: {
            "submission_ids": [1, 2, 3, ...]
        }
        
        Response: {
            "success": true,
            "results": [
                {"id": 1, "success": true, "total_score": 16, ...},
                {"id": 2, "success": false, "error": "..."},
                ...
            ],
            "total_cost_rubles": "0.45"
        }
        """
        submission_ids = request.data.get('submission_ids', [])
        
        if not submission_ids:
            return Response(
                {"error": "–ù–µ —É–∫–∞–∑–∞–Ω—ã submission_ids"},
                status=status.HTTP_400_BAD_REQUEST
            )
        
        results = []
        total_cost = Decimal(0)
        
        for sub_id in submission_ids:
            try:
                # –í—ã–∑—ã–≤–∞–µ–º check_with_ai –¥–ª—è –∫–∞–∂–¥–æ–≥–æ submission
                response = self.check_with_ai(request, pk=sub_id)
                
                if response.status_code == 200:
                    data = response.data
                    results.append({
                        "id": sub_id,
                        "success": True,
                        "total_score": data["total_score"],
                        "summary": data["summary"]
                    })
                    total_cost += Decimal(data["cost_rubles"])
                else:
                    results.append({
                        "id": sub_id,
                        "success": False,
                        "error": response.data.get("error", "Unknown error")
                    })
            except Exception as e:
                results.append({
                    "id": sub_id,
                    "success": False,
                    "error": str(e)
                })
        
        return Response({
            "success": True,
            "results": results,
            "total_checked": len([r for r in results if r["success"]]),
            "total_failed": len([r for r in results if not r["success"]]),
            "total_cost_rubles": str(total_cost)
        })
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª—è–µ–º serializers

```python
# homework/serializers.py

class AnswerSerializer(serializers.ModelSerializer):
    # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—è AI –ø—Ä–æ–≤–µ—Ä–∫–∏
    ai_result = serializers.SerializerMethodField()
    
    class Meta:
        model = Answer
        fields = [
            # —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è...
            'ai_checked',
            'ai_total_score',
            'ai_result',  # —Å–≤–æ–¥–∫–∞ AI –ø—Ä–æ–≤–µ—Ä–∫–∏
        ]
    
    def get_ai_result(self, obj):
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç AI –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ"""
        if not obj.ai_checked:
            return None
        
        return {
            "checked": True,
            "total_score": obj.ai_total_score,
            "criteria_scores": obj.ai_criteria_scores,
            "feedback": obj.ai_feedback,
            "errors": obj.ai_errors_found,
            "cost": str(obj.ai_cost_rubles) if obj.ai_cost_rubles else None
        }


class QuestionSerializer(serializers.ModelSerializer):
    class Meta:
        model = Question
        fields = [
            # —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è...
            'exam_type',
            'exam_task_code',
            'enable_ai_grading',
        ]
```

### –®–∞–≥ 4: Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è AI –ø—Ä–æ–≤–µ—Ä–∫–∏

```jsx
// frontend/src/modules/homework-analytics/components/AIGradingResult.jsx

import React from 'react';
import { Card, Badge } from '../../../shared/components';

export const AIGradingResult = ({ aiResult }) => {
  if (!aiResult || !aiResult.checked) {
    return null;
  }

  const { total_score, criteria_scores, feedback, errors } = aiResult;

  return (
    <Card className="ai-grading-result">
      <div className="header">
        <h3>–ü—Ä–æ–≤–µ—Ä–∫–∞ AI</h3>
        <Badge variant="info">
          {total_score} –±–∞–ª–ª–æ–≤
        </Badge>
      </div>

      <div className="summary">
        <p>{feedback}</p>
      </div>

      {criteria_scores && (
        <div className="criteria-breakdown">
          <h4>–û—Ü–µ–Ω–∫–∞ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º</h4>
          {Object.entries(criteria_scores).map(([key, data]) => (
            <div key={key} className="criterion">
              <div className="criterion-header">
                <span className="criterion-name">{key}</span>
                <Badge variant={data.score > 0 ? "success" : "warning"}>
                  {data.score} –±.
                </Badge>
              </div>
              <p className="criterion-reasoning">{data.reasoning}</p>
            </div>
          ))}
        </div>
      )}

      {errors && errors.length > 0 && (
        <div className="errors-found">
          <h4>–ù–∞–π–¥–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏</h4>
          {errors.map((err, idx) => (
            <div key={idx} className="error-item">
              <Badge variant="danger">{err.type}</Badge>
              <div className="error-details">
                <p className="fragment">"{err.fragment}"</p>
                {err.correction && (
                  <p className="correction">
                    ‚Üí <strong>{err.correction}</strong>
                  </p>
                )}
              </div>
            </div>
          ))}
        </div>
      )}
    </Card>
  );
};
```

### –®–∞–≥ 5: –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å AI" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —É—á–∏—Ç–µ–ª—è

```jsx
// frontend/src/modules/homework-analytics/components/TeacherSubmissionReview.jsx

import { useState } from 'react';
import { apiClient } from '../../../apiService';
import { Button } from '../../../shared/components';
import { AIGradingResult } from './AIGradingResult';

export const TeacherSubmissionReview = ({ submission }) => {
  const [aiResult, setAiResult] = useState(submission.ai_result);
  const [loading, setLoading] = useState(false);

  const handleCheckWithAI = async () => {
    setLoading(true);
    try {
      const response = await apiClient.post(
        `/homework/submissions/${submission.id}/check-with-ai/`
      );
      setAiResult(response.data);
    } catch (error) {
      console.error('AI check failed:', error);
      alert('–û—à–∏–±–∫–∞ AI –ø—Ä–æ–≤–µ—Ä–∫–∏: ' + error.message);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="submission-review">
      {/* –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å */}
      
      <div className="ai-section">
        {!aiResult && (
          <Button
            onClick={handleCheckWithAI}
            loading={loading}
            variant="secondary"
          >
            –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å AI
          </Button>
        )}
        
        <AIGradingResult aiResult={aiResult} />
      </div>
    </div>
  );
};
```

---

## üìö –û–±—É—á–µ–Ω–∏–µ AI —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –§–ò–ü–ò

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è 1: –ü—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

AI "–æ–±—É—á–∞–µ—Ç—Å—è" —á–µ—Ä–µ–∑ –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ –§–ò–ü–ò:

```python
# ai_grading_examples.py —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç:

EGE_CRITERIA = {
    "russian_27": {
        "name": "–ï–ì–≠ –†—É—Å—Å–∫–∏–π —è–∑—ã–∫ - –ó–∞–¥–∞–Ω–∏–µ 27 (—Å–æ—á–∏–Ω–µ–Ω–∏–µ)",
        "max_score": 25,
        "criteria": {
            "K1": {
                "name": "–§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã",
                "max": 1,
                "levels": [...]
            },
            "K2": {
                "name": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø—Ä–æ–±–ª–µ–º–µ",
                "max": 6,
                "levels": [...]
            },
            # ... –≤—Å–µ 12 –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
        }
    }
}
```

AI –ø–æ–ª—É—á–∞–µ—Ç —ç—Ç–∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –∏ —Å—Ç—Ä–æ–≥–æ —Å–ª–µ–¥—É–µ—Ç –∏–º.

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è 2: Few-shot –ø—Ä–∏–º–µ—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è)

–î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –ø—Ä–æ–º–ø—Ç:

```python
# –í ai_grading_examples.py —É–∂–µ –µ—Å—Ç—å EXAMPLE_1_STUDENT_ANSWER
# –∏ EXAMPLE_1_EXPECTED_OUTPUT

# –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–º–ø—Ç:
FEW_SHOT_EXAMPLES = """
–ü–†–ò–ú–ï–† –ü–†–û–í–ï–†–ö–ò:

–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç: [...]
–û—Ç–≤–µ—Ç —É—á–µ–Ω–∏–∫–∞: "–ê–≤—Ç–æ—Ä –ø–æ–¥–Ω–∏–º–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –æ —Å—É—â–Ω–æ—Å—Ç–∏ —á–µ—Å—Ç–∏..."

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞:
K1: 1 –±–∞–ª–ª (–ø—Ä–æ–±–ª–µ–º–∞ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤–µ—Ä–Ω–æ)
K2: 2 –±–∞–ª–ª–∞ (2 –ø—Ä–∏–º–µ—Ä–∞ –±–µ–∑ –ø–æ—è—Å–Ω–µ–Ω–∏–π –∏ —Å–≤—è–∑–∏)
K3: 1 –±–∞–ª–ª (–ø–æ–∑–∏—Ü–∏—è –∞–≤—Ç–æ—Ä–∞ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∞)
...

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—å —Å–ª–µ–¥—É—é—â—É—é —Ä–∞–±–æ—Ç—É:
"""
```

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è 3: –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```python
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ AI –Ω–∞ —É–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —É—á–∏—Ç–µ–ª–µ–º —Ä–∞–±–æ—Ç–∞—Ö

def calibrate_ai_on_teacher_data():
    """
    –ë–µ—Ä–µ–º 100 —Ä–∞–±–æ—Ç, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —É—á–∏—Ç–µ–ª–µ–º, –ø—Ä–æ–≥–æ–Ω—è–µ–º —á–µ—Ä–µ–∑ AI,
    —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç—ã
    """
    from homework.models import Answer
    
    # –ë–µ—Ä–µ–º —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏ —É—á–∏—Ç–µ–ª—è
    checked_answers = Answer.objects.filter(
        teacher_checked=True,
        question__exam_type='EGE'
    )[:100]
    
    discrepancies = []
    
    for answer in checked_answers:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º AI
        ai_result = grade_ege_essay(
            source_text=answer.question.question_text,
            student_answer=answer.answer_text
        )
        
        # –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å –æ—Ü–µ–Ω–∫–æ–π —É—á–∏—Ç–µ–ª—è
        teacher_score = answer.teacher_score
        ai_score = ai_result.total_score
        
        difference = abs(teacher_score - ai_score)
        
        if difference > 2:  # —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –±–æ–ª—å—à–µ 2 –±–∞–ª–ª–æ–≤
            discrepancies.append({
                "answer_id": answer.id,
                "teacher_score": teacher_score,
                "ai_score": ai_score,
                "difference": difference,
                "text": answer.answer_text[:500]
            })
    
    # –í—ã–≤–æ–¥–∏–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    print(f"–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ä–∞–±–æ—Ç: {len(checked_answers)}")
    print(f"–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π >2 –±–∞–ª–ª–æ–≤: {len(discrepancies)}")
    print(f"–°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å: {(1 - len(discrepancies)/len(checked_answers)) * 100:.1f}%")
    
    # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç—ã
    return discrepancies
```

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–ª—è –Ω–µ–±–æ–ª—å—à–æ–π —à–∫–æ–ª—ã (100-200 —É—á–µ–Ω–∏–∫–æ–≤)

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è**: –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã + –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
# –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
service = ExamAIGradingService()
result = service.grade_exam_work_sync(...)
```

**–ó–∞—Ç—Ä–∞—Ç—ã**: ~2-4‚ÇΩ –≤ –º–µ—Å—è—Ü (30-40 —Å–æ—á–∏–Ω–µ–Ω–∏–π)

### –î–ª—è –∫—Ä—É–ø–Ω–æ–π —à–∫–æ–ª—ã (500+ —É—á–µ–Ω–∏–∫–æ–≤)

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è**: Batch processing + –æ—á–µ—Ä–µ–¥–∏

```python
# –ò—Å–ø–æ–ª—å–∑—É–µ–º Celery –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
from celery import shared_task

@shared_task
def check_submissions_batch(submission_ids):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–∞–∫–µ—Ç —Ä–∞–±–æ—Ç –≤ —Ñ–æ–Ω–µ"""
    service = ExamAIGradingService()
    
    works = []
    for sub_id in submission_ids:
        submission = Answer.objects.get(id=sub_id)
        works.append((
            submission.question.question_text,
            submission.answer_text,
            submission.question.exam_task_code
        ))
    
    # Batch –ø—Ä–æ–≤–µ—Ä–∫–∞
    results = service.grade_batch_sync(works, batch_size=50)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    for sub_id, result in zip(submission_ids, results):
        if result:
            submission = Answer.objects.get(id=sub_id)
            submission.ai_checked = True
            submission.ai_total_score = result.total_score
            # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
            submission.save()
```

**–ó–∞—Ç—Ä–∞—Ç—ã**: ~10-20‚ÇΩ –≤ –º–µ—Å—è—Ü (200-400 —Å–æ—á–∏–Ω–µ–Ω–∏–π)

### –î–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (1000+ —É—á–µ–Ω–∏–∫–æ–≤)

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã + rate limiting + –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è

```python
import asyncio
from asyncio import Semaphore

class ScalableExamGradingService(ExamAIGradingService):
    def __init__(self, max_concurrent=10):
        super().__init__()
        self.semaphore = Semaphore(max_concurrent)
    
    async def grade_with_rate_limit(self, *args, **kwargs):
        async with self.semaphore:
            return await self.grade_exam_work_async(*args, **kwargs)
    
    async def grade_large_batch(self, works, priority_ids=None):
        """
        –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–æ–ª—å—à–æ–π –ø–∞–∫–µ—Ç —Å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–µ–π
        
        Args:
            works: —Å–ø–∏—Å–æ–∫ —Ä–∞–±–æ—Ç
            priority_ids: ID —Ä–∞–±–æ—Ç —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (–ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏)
        """
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º: —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ
        if priority_ids:
            works_sorted = sorted(works, key=lambda w: w[3] in priority_ids, reverse=True)
        else:
            works_sorted = works
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º —Å rate limiting
        tasks = [
            self.grade_with_rate_limit(...)
            for work in works_sorted
        ]
        
        results = await asyncio.gather(*tasks, return_exceptions=True)
        return results
```

**–ó–∞—Ç—Ä–∞—Ç—ã**: ~50-100‚ÇΩ –≤ –º–µ—Å—è—Ü (1000-2000 —Å–æ—á–∏–Ω–µ–Ω–∏–π)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞

```bash
cd teaching_panel
python -c "
from homework.exam_ai_grading_service import grade_ege_essay
from homework.ai_grading_examples import EXAMPLE_1_SOURCE, EXAMPLE_1_STUDENT_ANSWER

result = grade_ege_essay(EXAMPLE_1_SOURCE, EXAMPLE_1_STUDENT_ANSWER)
print(f'–û—Ü–µ–Ω–∫–∞: {result.total_score} / {result.max_score}')
print(f'–°—Ç–æ–∏–º–æ—Å—Ç—å: {result.cost_rubles}‚ÇΩ')
print(result.summary)
"
```

### –¢–µ—Å—Ç 2: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ—Ü–µ–Ω–∫–æ–π —É—á–∏—Ç–µ–ª—è

```python
# –°–∫—Ä–∏–ø—Ç: test_ai_accuracy.py

from homework.models import Answer
from homework.exam_ai_grading_service import grade_ege_essay

def test_ai_accuracy():
    # –ë–µ—Ä–µ–º 20 —Ä–∞–±–æ—Ç, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —É—á–∏—Ç–µ–ª–µ–º
    checked = Answer.objects.filter(
        teacher_checked=True,
        question__exam_task_code='russian_27'
    )[:20]
    
    matches = 0
    
    for answer in checked:
        result = grade_ege_essay(
            source_text=answer.question.question_text,
            student_answer=answer.answer_text
        )
        
        # –°—á–∏—Ç–∞–µ–º match –µ—Å–ª–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ ‚â§ 2 –±–∞–ª–ª–∞
        if abs(result.total_score - answer.teacher_score) <= 2:
            matches += 1
    
    accuracy = (matches / len(checked)) * 100
    print(f"–¢–æ—á–Ω–æ—Å—Ç—å AI: {accuracy:.1f}% (¬± 2 –±–∞–ª–ª–∞)")
    
    return accuracy

if __name__ == "__main__":
    test_ai_accuracy()
```

---

## üéì –ò—Ç–æ–≥–æ: –ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º

1. **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ —É—á–∏—Ç–µ–ª—è**: 70-80% (—Å 15 –º–∏–Ω—É—Ç –¥–æ 3 –º–∏–Ω—É—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É)
2. **–°—É–ø–µ—Ä-–Ω–∏–∑–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å**: 0.015‚ÇΩ –∑–∞ —Å–æ—á–∏–Ω–µ–Ω–∏–µ (–∫–ª–∞—Å—Å = 0.45‚ÇΩ)
3. **–î–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**: –û—Ü–µ–Ω–∫–∞ –ø–æ –≤—Å–µ–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º –§–ò–ü–ò + –ø—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –û—Ç 10 –¥–æ 10000+ —É—á–µ–Ω–∏–∫–æ–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
5. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –£—á–∏—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ—Ü–µ–Ω–∫—É AI

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π workflow**:
1. –£—á–µ–Ω–∏–∫ —Å–¥–∞–µ—Ç —Ä–∞–±–æ—Ç—É ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è AI –ø—Ä–æ–≤–µ—Ä–∫–∞
2. –£—á–∏—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É AI + –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä
3. –£—á–∏—Ç–µ–ª—å —Ç—Ä–∞—Ç–∏—Ç 3 –º–∏–Ω—É—Ç—ã –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω—É—é –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É (–≤–º–µ—Å—Ç–æ 15 –º–∏–Ω—É—Ç –Ω–∞ –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É)
4. –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ = AI + –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —É—á–∏—Ç–µ–ª—è

**Next steps**:
1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–®–∞–≥ 1)
2. –î–æ–±–∞–≤–∏—Ç—å API endpoints (–®–∞–≥ 2)
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 10 —Ä–∞–±–æ—Ç–∞—Ö
4. –†–∞—Å–∫–∞—Ç–∏—Ç—å –Ω–∞ production
5. –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç —É—á–∏—Ç–µ–ª–µ–π
6. –û—Ç–∫–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
