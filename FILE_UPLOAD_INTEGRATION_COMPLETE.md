# üì§ File Upload Integration - Complete

**–î–∞—Ç–∞:** 3 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û

---

## üéØ –¶–µ–ª—å

–î–æ–±–∞–≤–∏—Ç—å drag-and-drop –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∞—É–¥–∏–æ) –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ Google Drive –≤ –ø–∞–ø–∫—É —É—á–∏—Ç–µ–ª—è.

---

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. Backend API Endpoint

**–§–∞–π–ª:** `teaching_panel/homework/views.py`

**–ù–æ–≤—ã–π action:**
```python
@action(detail=False, methods=['post'], url_path='upload-file')
def upload_file(self, request):
    """
    –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –∞—É–¥–∏–æ) –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ –¥–æ–º–∞—à–∫–∏ –≤ Google Drive
    
    POST /api/homework/homeworks/upload-file/
    Body (multipart/form-data):
        - file: —Ñ–∞–π–ª (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –∞—É–¥–∏–æ)
        - file_type: 'image' –∏–ª–∏ 'audio'
    
    Returns:
        {
            'url': 'https://drive.google.com/...',
            'file_id': 'gdrive_file_id',
            'file_name': 'original_filename.jpg',
            'mime_type': 'image/jpeg',
            'size': 123456
        }
    """
```

**–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ —É—á–∏—Ç–µ–ª—è)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è MIME —Ç–∏–ø–æ–≤:
  - **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:** JPG, PNG, GIF, WebP
  - **–ê—É–¥–∏–æ:** MP3, WAV, OGG, MP4, M4A
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (–º–∞–∫—Å. 50 MB)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ Google Drive —á–µ—Ä–µ–∑ `GoogleDriveManager`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–ø–∫—É —É—á–∏—Ç–µ–ª—è: `teacher_{id}_{firstname}_{lastname}/`
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏: `homework_teacher{id}_{timestamp}_{filename}`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

### 2. Frontend API Integration

**–§–∞–π–ª:** `frontend/src/apiService.js`

**–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è:**
```javascript
export const uploadHomeworkFile = (file, fileType) => {
  const formData = new FormData();
  formData.append('file', file);
  formData.append('file_type', fileType);
  return apiClient.post('homework/upload-file/', formData, {
    headers: { 'Content-Type': 'multipart/form-data' }
  });
};
```

---

### 3. Universal FileUploader Component

**–§–∞–π–ª—ã:**
- `frontend/src/modules/homework-analytics/components/questions/FileUploader.js`
- `frontend/src/modules/homework-analytics/components/questions/FileUploader.css`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ Drag-and-drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤)
- ‚úÖ –ö–ª–∏–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ (—Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±)
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∑–∞–≥—Ä—É–∑–∫–∏ (—Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
- ‚úÖ –ü—Ä–µ–≤—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:
  - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: `<img>` —Å max-height 300px
  - –ê—É–¥–∏–æ: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π `<audio>` –ø–ª–µ–µ—Ä
- ‚úÖ –ö–Ω–æ–ø–∫–∏ "–ó–∞–º–µ–Ω–∏—Ç—å" –∏ "–£–¥–∞–ª–∏—Ç—å"
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ (–¥–æ 50 MB)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å user-friendly —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- ‚úÖ Responsive –¥–∏–∑–∞–π–Ω (–∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)

**Props:**
- `fileType` - 'image' –∏–ª–∏ 'audio'
- `onUploadSuccess(url, fileData)` - callback –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
- `currentUrl` - —Ç–µ–∫—É—â–∏–π URL —Ñ–∞–π–ª–∞ (–¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- `accept` - —Å—Ç—Ä–æ–∫–∞ –¥–ª—è HTML accept attribute

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```jsx
<FileUploader
  fileType="image"
  currentUrl={config.imageUrl || ''}
  onUploadSuccess={(url) => updateConfig({ imageUrl: url })}
  accept="image/*"
/>
```

---

### 4. Integration –≤ Question Components

#### HotspotQuestion (–≤–æ–ø—Ä–æ—Å —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º)

**–§–∞–π–ª:** `frontend/src/modules/homework-analytics/components/questions/HotspotQuestion.js`

**–î–æ:**
```jsx
<input
  className="form-input"
  placeholder="https://example.com/image.png"
  value={config.imageUrl || ''}
  onChange={(event) => updateConfig({ imageUrl: event.target.value })}
/>
<small className="gm-hint">–ú—ã –¥–æ–±–∞–≤–∏–º –≤–∏–∑—É–∞–ª—å–Ω—É—é —Ä–∞–∑–º–µ—Ç–∫—É...</small>
```

**–ü–æ—Å–ª–µ:**
```jsx
<FileUploader
  fileType="image"
  currentUrl={config.imageUrl || ''}
  onUploadSuccess={(url) => updateConfig({ imageUrl: url })}
  accept="image/*"
/>
<small className="gm-hint">–§–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Google Drive –≤ –≤–∞—à—É –ø–∞–ø–∫—É</small>
```

#### ListeningQuestion (–≤–æ–ø—Ä–æ—Å —Å –∞—É–¥–∏–æ)

**–§–∞–π–ª:** `frontend/src/modules/homework-analytics/components/questions/ListeningQuestion.js`

**–î–æ:**
```jsx
<input
  className="form-input"
  placeholder="https://example.com/audio.mp3"
  value={config.audioUrl || ''}
  onChange={(event) => updateConfig({ audioUrl: event.target.value })}
/>
<small className="gm-hint">–ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞...</small>
```

**–ü–æ—Å–ª–µ:**
```jsx
<FileUploader
  fileType="audio"
  currentUrl={config.audioUrl || ''}
  onUploadSuccess={(url) => updateConfig({ audioUrl: url })}
  accept="audio/*"
/>
<small className="gm-hint">–§–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Google Drive –≤ –≤–∞—à—É –ø–∞–ø–∫—É</small>
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
- ‚úÖ –û–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ–±–µ—Ä–Ω—É—Ç—ã –≤ `React.memo()` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ Custom comparison function –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∏—à–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü–æ—Ç–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞:

1. **–£—á–∏—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç/–ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç —Ñ–∞–π–ª** –≤ FileUploader
2. **FileUploader –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç** —Ç–∏–ø –∏ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
3. **–û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ API:** `POST /api/homework/homeworks/upload-file/`
   - `FormData` —Å –ø–æ–ª—è–º–∏ `file` –∏ `file_type`
4. **Backend (Django) –ø–æ–ª—É—á–∞–µ—Ç —Ñ–∞–π–ª:**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ (—Ç–æ–ª—å–∫–æ —É—á–∏—Ç–µ–ª—è)
   - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç MIME —Ç–∏–ø –∏ —Ä–∞–∑–º–µ—Ä
   - –í—ã–∑—ã–≤–∞–µ—Ç `GoogleDriveManager.upload_file()`
5. **GoogleDriveManager:**
   - –ü–æ–ª—É—á–∞–µ—Ç/—Å–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É —É—á–∏—Ç–µ–ª—è: `get_or_create_teacher_folder()`
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª –≤ Google Drive API
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ —Å—Å—ã–ª–∫–∏
6. **Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON:**
   ```json
   {
     "status": "success",
     "url": "https://drive.google.com/...",
     "download_url": "https://drive.google.com/...",
     "file_id": "1abc...",
     "file_name": "image.jpg",
     "mime_type": "image/jpeg",
     "size": 123456
   }
   ```
7. **FileUploader –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç:**
   - –í—ã–∑—ã–≤–∞–µ—Ç `onUploadSuccess(url, fileData)`
   - –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç `config.imageUrl` –∏–ª–∏ `config.audioUrl`
8. **–ü—Ä–µ–≤—å—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –≤ Google Drive:

```
üóÇÔ∏è Teaching Panel Recordings (root folder)
  ‚îî‚îÄ üìÅ teacher_123_Ivan_Petrov/
       ‚îú‚îÄ üñºÔ∏è homework_teacher123_1701608400_task1.jpg
       ‚îú‚îÄ üñºÔ∏è homework_teacher123_1701608500_diagram.png
       ‚îú‚îÄ üéµ homework_teacher123_1701608600_listening.mp3
       ‚îî‚îÄ üéµ homework_teacher123_1701608700_audio_exercise.wav
```

### Naming Convention:

- **–ü–∞–ø–∫–∞ —É—á–∏—Ç–µ–ª—è:** `teacher_{user_id}_{first_name}_{last_name}`
- **–§–∞–π–ª –¥–æ–º–∞—à–∫–∏:** `homework_teacher{user_id}_{timestamp}_{original_filename}`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ò–∑–æ–ª—è—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ —É—á–∏—Ç–µ–ª—è–º
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ (timestamp –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–ª–∏–∑–∏–∏)
- –õ–µ–≥–∫–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤:

| –¢–∏–ø   | –§–æ—Ä–º–∞—Ç—ã                    | –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä |
|-------|----------------------------|--------------|
| Image | JPG, PNG, GIF, WebP        | 50 MB        |
| Audio | MP3, WAV, OGG, MP4, M4A    | 50 MB        |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å Django:**
```powershell
cd teaching_panel
..\.venv\Scripts\Activate.ps1
python manage.py runserver
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å frontend:**
```powershell
cd frontend
npm start
```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Google Drive —Ç–æ–∫–µ–Ω:**
```powershell
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ gdrive_token.json —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –≤–∞–ª–∏–¥–µ–Ω
# –ò–Ω–∞—á–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ setup_gdrive_oauth.py
python setup_gdrive_oauth.py
```

4. **–°–æ–∑–¥–∞—Ç—å –î–ó —Å Hotspot –≤–æ–ø—Ä–æ—Å–æ–º:**
   - –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —É—á–∏—Ç–µ–ª—å
   - Homework ‚Üí –°–æ–∑–¥–∞—Ç—å –î–ó
   - –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å ‚Üí HOTSPOT
   - **–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ** –≤ –∑–æ–Ω—É –∑–∞–≥—Ä—É–∑–∫–∏
   - **–û–∂–∏–¥–∞–µ—Ç—Å—è:**
     - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä 0% ‚Üí 100%
     - –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è
     - –ö–Ω–æ–ø–∫–∏ "–ó–∞–º–µ–Ω–∏—Ç—å" –∏ "–£–¥–∞–ª–∏—Ç—å"

5. **–°–æ–∑–¥–∞—Ç—å –î–ó —Å Listening –≤–æ–ø—Ä–æ—Å–æ–º:**
   - –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å ‚Üí LISTENING
   - **–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ MP3 —Ñ–∞–π–ª**
   - **–û–∂–∏–¥–∞–µ—Ç—Å—è:**
     - –ó–∞–≥—Ä—É–∑–∫–∞ —É—Å–ø–µ—à–Ω–∞
     - –ê—É–¥–∏–æ-–ø–ª–µ–µ—Ä –ø–æ—è–≤–ª—è–µ—Ç—Å—è
     - –ú–æ–∂–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∞—É–¥–∏–æ

6. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Google Drive:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ https://drive.google.com
   - –ù–∞–π–¥–∏—Ç–µ –ø–∞–ø–∫—É "Teaching Panel Recordings"
   - –í–Ω—É—Ç—Ä–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–∞–ø–∫–∞ `teacher_{id}_{name}`
   - –§–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫:

**–¢–µ—Å—Ç 1: –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞**
- –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å `.txt` —Ñ–∞–π–ª –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- **–û–∂–∏–¥–∞–µ—Ç—Å—è:** "–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"

**–¢–µ—Å—Ç 2: –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π**
- –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª > 50 MB
- **–û–∂–∏–¥–∞–µ—Ç—Å—è:** "–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º—É–º: 50 MB"

**–¢–µ—Å—Ç 3: –ó–∞–≥—Ä—É–∑–∫–∞ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**
- API –∑–∞–ø—Ä–æ—Å –±–µ–∑ —Ç–æ–∫–µ–Ω–∞
- **–û–∂–∏–¥–∞–µ—Ç—Å—è:** 401 Unauthorized

**–¢–µ—Å—Ç 4: –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–º**
- –°—Ç—É–¥–µ–Ω—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
- **–û–∂–∏–¥–∞–µ—Ç—Å—è:** 403 Forbidden "–¢–æ–ª—å–∫–æ —É—á–∏—Ç–µ–ª—è –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã"

---

## üåê –î–µ–ø–ª–æ–π –Ω–∞ production

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Google Drive –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
ssh tp
cd /var/www/teaching_panel

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω
ls -la gdrive_token.json

# –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω–∞ –Ω–µ—Ç - —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
# scp gdrive_token.json tp:/var/www/teaching_panel/
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å settings.py:

```python
# teaching_panel/settings.py
GDRIVE_TOKEN_FILE = 'gdrive_token.json'
GDRIVE_RECORDINGS_FOLDER_ID = 'your_folder_id_here'
```

### 3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π frontend:

```powershell
# –õ–æ–∫–∞–ª—å–Ω–æ
cd frontend
npm run build

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp -r build/* tp:/var/www/teaching_panel/frontend/
```

### 4. –†–µ—Å—Ç–∞—Ä—Ç Django:

```bash
ssh tp
sudo systemctl restart gunicorn
```

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:

```bash
sudo journalctl -u gunicorn -f
# –°–æ–∑–¥–∞—Ç—å –î–ó —Å —Ñ–∞–π–ª–æ–º –Ω–∞ production –∏ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
```

---

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend:
- ‚úÖ `teaching_panel/homework/views.py` (+100 —Å—Ç—Ä–æ–∫) - upload_file action
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `schedule/gdrive_utils.py` (GoogleDriveManager)

### Frontend:
- ‚úÖ `frontend/src/apiService.js` (+8 —Å—Ç—Ä–æ–∫) - uploadHomeworkFile
- ‚úÖ `frontend/src/modules/homework-analytics/components/questions/FileUploader.js` (+230 —Å—Ç—Ä–æ–∫, –Ω–æ–≤—ã–π)
- ‚úÖ `frontend/src/modules/homework-analytics/components/questions/FileUploader.css` (+110 —Å—Ç—Ä–æ–∫, –Ω–æ–≤—ã–π)
- ‚úÖ `frontend/src/modules/homework-analytics/components/questions/HotspotQuestion.js` (–∏–∑–º–µ–Ω–µ–Ω)
- ‚úÖ `frontend/src/modules/homework-analytics/components/questions/ListeningQuestion.js` (–∏–∑–º–µ–Ω–µ–Ω)

### –°–±–æ—Ä–∫–∞:
- ‚úÖ Frontend —Å–æ–±—Ä–∞–Ω —É—Å–ø–µ—à–Ω–æ: **267.89 kB** (main.js)
- ‚úÖ CSS: **37.41 kB** (main.css)

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å:

1. ‚úÖ **Drag-and-drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —É—á–∏—Ç–µ–ª—è –º–æ–≥—É—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å —Ñ–∞–π–ª—ã
2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ Google Drive** - —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ–±–ª–∞–∫–µ
3. ‚úÖ **–ò–∑–æ–ª—è—Ü–∏—è –ø–æ —É—á–∏—Ç–µ–ª—è–º** - –∫–∞–∂–¥—ã–π —É—á–∏—Ç–µ–ª—å –∏–º–µ–µ—Ç —Å–≤–æ—é –ø–∞–ø–∫—É
4. ‚úÖ **–ü—Ä–µ–≤—å—é —Ñ–∞–π–ª–æ–≤** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∞—É–¥–∏–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å—Ä–∞–∑—É
5. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö** - –∫–ª–∏–µ–Ω—Ç + —Å–µ—Ä–≤–µ—Ä
6. ‚úÖ **User-friendly –æ—à–∏–±–∫–∏** - –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
7. ‚úÖ **Responsive –¥–∏–∑–∞–π–Ω** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
8. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è React** - React.memo –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∏—à–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** Drag & drop –∏–ª–∏ –∫–ª–∏–∫
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –∏ —Ä–∞–∑–º–µ—Ä–æ–≤ —Ñ–∞–π–ª–æ–≤
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** Google Drive –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è
- **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:** –§–∞–π–ª—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —É—á–∏—Ç–µ–ª—è–º
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ —Å graceful degradation

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **Real-time –ø—Ä–æ–≥—Ä–µ—Å—Å:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å XMLHttpRequest –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
2. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:** –ó–∞–≥—Ä—É–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
3. **Crop –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:** –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
4. **Thumbnail –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–∏–Ω–∏–∞—Ç—é—Ä—ã
5. **CDN –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ CDN –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
6. **–ö–≤–æ—Ç—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:** –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —É—á–∏—Ç–µ–ª—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞

---

**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–î–∞—Ç–∞:** 3 –¥–µ–∫–∞–±—Ä—è 2025  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** ~25 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **PRODUCTION READY**
