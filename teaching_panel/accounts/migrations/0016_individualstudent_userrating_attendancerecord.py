# Generated by Django 4.2.26 on 2025-12-04 09:31

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('schedule', '0012_lessonrecording_allowed_groups_and_more'),
        ('accounts', '0015_extend_notification_preferences'),
    ]

    operations = [
        migrations.CreateModel(
            name='IndividualStudent',
            fields=[
                ('user', models.OneToOneField(limit_choices_to={'role': 'student'}, on_delete=django.db.models.deletion.CASCADE, primary_key=True, related_name='individual_student_profile', serialize=False, to=settings.AUTH_USER_MODEL, verbose_name='—É—á–µ–Ω–∏–∫')),
                ('teacher_notes', models.TextField(blank=True, default='', help_text='–ó–∞–º–µ—Ç–∫–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è –æ–± —É—á–µ–Ω–∏–∫–µ', verbose_name='–∑–∞–º–µ—á–∞–Ω–∏—è —É—á–∏—Ç–µ–ª—è')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='–¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è')),
                ('teacher', models.ForeignKey(blank=True, limit_choices_to={'role': 'teacher'}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='individual_students', to=settings.AUTH_USER_MODEL, verbose_name='–æ—Å–Ω–æ–≤–Ω–æ–π —É—á–∏—Ç–µ–ª—å')),
            ],
            options={
                'verbose_name': '–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —É—á–µ–Ω–∏–∫',
                'verbose_name_plural': '–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —É—á–µ–Ω–∏–∫–∏',
            },
        ),
        migrations.CreateModel(
            name='UserRating',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total_points', models.IntegerField(default=0, help_text='–°—É–º–º–∞ –≤—Å–µ—Ö –æ—á–∫–æ–≤ (–ø–æ—Å–µ—â–µ–Ω–∏–µ + –î–ó + –∫–æ–Ω—Ç—Ä–æ–ª—å)', verbose_name='–æ–±—â–∏–µ –æ—á–∫–∏')),
                ('attendance_points', models.IntegerField(default=0, help_text='–û—á–∫–∏ –∑–∞ –ø–æ—Å–µ—â–µ–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π', verbose_name='–æ—á–∫–∏ –∑–∞ –ø–æ—Å–µ—â–µ–Ω–∏–µ')),
                ('homework_points', models.IntegerField(default=0, help_text='–û—á–∫–∏ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è', verbose_name='–æ—á–∫–∏ –∑–∞ –î–ó')),
                ('control_points_value', models.IntegerField(db_column='control_points', default=0, help_text='–û—á–∫–∏ –∑–∞ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏', verbose_name='–æ—á–∫–∏ –∑–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏')),
                ('rank', models.IntegerField(default=0, help_text='–ú–µ—Å—Ç–æ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ –≥—Ä—É–ø–ø—ã (0 –µ—Å–ª–∏ –Ω–µ—Ç –≥—Ä—É–ø–ø—ã)', verbose_name='–º–µ—Å—Ç–æ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='–¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è')),
                ('group', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='student_ratings', to='schedule.group', verbose_name='–≥—Ä—É–ø–ø–∞')),
                ('user', models.ForeignKey(limit_choices_to={'role': 'student'}, on_delete=django.db.models.deletion.CASCADE, related_name='ratings', to=settings.AUTH_USER_MODEL, verbose_name='—É—á–µ–Ω–∏–∫')),
            ],
            options={
                'verbose_name': '—Ä–µ–π—Ç–∏–Ω–≥ —É—á–µ–Ω–∏–∫–∞',
                'verbose_name_plural': '—Ä–µ–π—Ç–∏–Ω–≥–∏ —É—á–µ–Ω–∏–∫–æ–≤',
                'ordering': ['-total_points'],
                'indexes': [models.Index(fields=['group', '-total_points'], name='accounts_us_group_i_10b03f_idx'), models.Index(fields=['user', 'group'], name='accounts_us_user_id_a71d10_idx')],
                'unique_together': {('user', 'group')},
            },
        ),
        migrations.CreateModel(
            name='AttendanceRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(blank=True, choices=[('attended', '‚úÖ –ë—ã–ª'), ('absent', '‚ùå –ù–µ –±—ã–ª'), ('watched_recording', 'üëÅÔ∏è –ü–æ—Å–º–æ—Ç—Ä–µ–ª –∑–∞–ø–∏—Å—å')], max_length=20, null=True, verbose_name='—Å—Ç–∞—Ç—É—Å –ø–æ—Å–µ—â–µ–Ω–∏—è')),
                ('auto_recorded', models.BooleanField(default=False, help_text='True –µ—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ Zoom', verbose_name='–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ')),
                ('recorded_at', models.DateTimeField(auto_now_add=True, verbose_name='–¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='–¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è')),
                ('lesson', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_records', to='schedule.lesson', verbose_name='–∑–∞–Ω—è—Ç–∏–µ')),
                ('recorded_by', models.ForeignKey(blank=True, limit_choices_to={'role': 'teacher'}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='manual_attendance_records', to=settings.AUTH_USER_MODEL, verbose_name='–∑–∞–ø–æ–ª–Ω–∏–ª (—É—á–∏—Ç–µ–ª—å)')),
                ('student', models.ForeignKey(limit_choices_to={'role': 'student'}, on_delete=django.db.models.deletion.CASCADE, related_name='attendance_records', to=settings.AUTH_USER_MODEL, verbose_name='—É—á–µ–Ω–∏–∫')),
            ],
            options={
                'verbose_name': '–∑–∞–ø–∏—Å—å –ø–æ—Å–µ—â–µ–Ω–∏—è',
                'verbose_name_plural': '–∑–∞–ø–∏—Å–∏ –ø–æ—Å–µ—â–µ–Ω–∏—è',
                'ordering': ['-recorded_at'],
                'indexes': [models.Index(fields=['lesson', 'student'], name='accounts_at_lesson__d5ca80_idx'), models.Index(fields=['student', '-recorded_at'], name='accounts_at_student_c60e9d_idx'), models.Index(fields=['status', 'recorded_at'], name='accounts_at_status_ffa456_idx')],
                'unique_together': {('lesson', 'student')},
            },
        ),
    ]
