# üì± SMS Verification Setup Guide

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMS.RU –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ SMS.RU (2 –º–∏–Ω—É—Ç—ã)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://sms.ru/
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email (–ø—Ä–∏–¥–µ—Ç –ø–∏—Å—å–º–æ —Å —Å—Å—ã–ª–∫–æ–π)
3. –ì–æ—Ç–æ–≤–æ! –ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ API ID

–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **API**: https://sms.ru/api
2. –ù–∞–∂–º–∏—Ç–µ **–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á** –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **API ID** (–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–∑ –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä)

### 3. –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ë–∞–ª–∞–Ω—Å**: https://sms.ru/pay
2. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã (–±–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞, –Ø–Ω–¥–µ–∫—Å.–î–µ–Ω—å–≥–∏ –∏ –¥—Ä.)
3. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è: **100 —Ä—É–±–ª–µ–π**
4. –°—Ç–æ–∏–º–æ—Å—Ç—å SMS –ø–æ –†–æ—Å—Å–∏–∏: –æ—Ç **1.15 —Ä—É–±** –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ

**–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ö–≤–∞—Ç–∏—Ç 100 —Ä—É–±–ª–µ–π (~80 SMS)**

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (teaching_panel/):

```env
SMSRU_API_ID=–≤–∞—à_api_id_–∑–¥–µ—Å—å
SMSRU_FROM_NAME=Teaching Panel
```

–ò–ª–∏ –Ω–∞ Windows PowerShell:
```powershell
$env:SMSRU_API_ID="–≤–∞—à_api_id_–∑–¥–µ—Å—å"
```

**–í–ê–ñ–ù–û:** –î–æ–±–∞–≤—å—Ç–µ `.env` –≤ `.gitignore`!

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É —á–µ—Ä–µ–∑ web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–û—Ç–ø—Ä–∞–≤–∏—Ç—å SMS**: https://sms.ru/send
2. –í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
3. –í–≤–µ–¥–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
4. –ù–∞–∂–º–∏—Ç–µ **–û—Ç–ø—Ä–∞–≤–∏—Ç—å**
5. SMS –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–π—Ç–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 5-10 —Å–µ–∫—É–Ω–¥

## API Endpoints

### –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

```bash
POST http://localhost:8000/accounts/api/sms/send-code/
Content-Type: application/json

{
  "phone_number": "+79991234567"
}
```

–û—Ç–≤–µ—Ç:
```json
{
  "message": "–ö–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä",
  "phone_number": "+79991234567",
  "expires_in": 600
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

```bash
POST http://localhost:8000/accounts/api/sms/verify-code/
Content-Type: application/json

{
  "phone_number": "+79991234567",
  "code": "123456"
}
```

–û—Ç–≤–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—Ö–µ:
```json
{
  "message": "–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —É—Å–ø–µ—à–Ω–æ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω",
  "verified": true,
  "phone_number": "+79991234567"
}
```

–û—Ç–≤–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ:
```json
{
  "error": "–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏",
  "attempts_left": 2
}
```

### –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞

```bash
POST http://localhost:8000/accounts/api/sms/resend-code/
Content-Type: application/json

{
  "phone_number": "+79991234567"
}
```

## –§–æ—Ä–º–∞—Ç—ã –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:
- –†–æ—Å—Å–∏—è: `+7XXXXXXXXXX` (12 —Å–∏–º–≤–æ–ª–æ–≤)
- –£–∫—Ä–∞–∏–Ω–∞: `+380XXXXXXXXX` (13 —Å–∏–º–≤–æ–ª–æ–≤)
- –î—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã: –æ—Ç 11 –¥–æ 15 —Å–∏–º–≤–æ–ª–æ–≤ —Å –∫–æ–¥–æ–º —Å—Ç—Ä–∞–Ω—ã

–ü—Ä–∏–º–µ—Ä—ã:
- `+79991234567` ‚úÖ
- `+380501234567` ‚úÖ
- `+1234567890` ‚úÖ
- `79991234567` ‚ùå (–±–µ–∑ +)
- `+7 999 123 45 67` ‚úÖ (–ø—Ä–æ–±–µ–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

**–í–∞–∂–Ω–æ:** SMS.RU –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–æ–º–µ—Ä–∞ –ë–ï–ó +, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã:
- **1 SMS –≤ –º–∏–Ω—É—Ç—É** - –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- **3 –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏** - –ø–æ—Å–ª–µ 3 –Ω–µ–≤–µ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π –∫–æ–¥
- **10 –º–∏–Ω—É—Ç TTL** - –∫–æ–¥ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** - —Å—Ç–∞—Ä—ã–µ –∫–æ–¥—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è –∏—Å—Ç—ë–∫—à–∏–º–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ SMS.RU

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMS.RU:

1. –í Django admin –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–¥—ã:
   http://localhost:8000/admin/accounts/phoneverification/

2. –ö–æ–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î, –º–æ–∂–Ω–æ –µ–≥–æ –≤–∑—è—Ç—å –æ—Ç—Ç—É–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

3. –í –ª–æ–≥–∞—Ö Django –≤–∏–¥–Ω–æ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏:
```
WARNING accounts.sms_service: SMS.RU API ID not configured. SMS sending will be disabled.
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ SMS –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞: `INFO: SMS sent successfully to +79991234567. SMS ID: 123456`
- –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: `ERROR: SMS.RU error for +79991234567: [error message]`
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è: `INFO: Phone +79991234567 verified successfully`
- –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥: `WARNING: Invalid verification code for +79991234567`

## Troubleshooting

### SMS –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API ID –≤ `.env` –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ https://sms.ru/balance
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Django –Ω–∞ –æ—à–∏–±–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏: https://sms.ru/statistics

### –û—à–∏–±–∫–∞ "–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –ª–∏—Ü–µ–≤–æ–º —Å—á–µ—Ç–µ"

- –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å: https://sms.ru/pay
- –ú–∏–Ω–∏–º—É–º: 100 —Ä—É–±–ª–µ–π

### –û—à–∏–±–∫–∞ "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—å"

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å –∫–æ–¥–æ–º —Å—Ç—Ä–∞–Ω—ã)
- –ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ: 79991234567 (–±–µ–∑ +)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑ +7 –≤ 7 –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ö–æ–¥ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–æ–º–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏: https://sms.ru/statistics
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏ (–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ/–Ω–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ/–≤ –æ—á–µ—Ä–µ–¥–∏)

## Production —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ** API ID –≤ git
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **Rate Limiting** –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
4. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞—Å—Ö–æ–¥—ã —á–µ—Ä–µ–∑ https://sms.ru/balance
5. –í–∫–ª—é—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∏–∑–∫–æ–º –±–∞–ª–∞–Ω—Å–µ
6. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSL/HTTPS –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ SMS.RU

‚úÖ **–ü—Ä–æ—Å—Ç–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - 2 –º–∏–Ω—É—Ç—ã, –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚úÖ **–î–µ—à–µ–≤–ª–µ** - –æ—Ç 1.15 —Ä—É–±/SMS (Twilio ~5 —Ä—É–±/SMS)
‚úÖ **–ë–µ–∑ trial –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –ª—é–±—ã–µ –Ω–æ–º–µ—Ä–∞ —Å—Ä–∞–∑—É
‚úÖ **–†–æ—Å—Å–∏–π—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å** - –±—ã—Å—Ç—Ä–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
‚úÖ **–£–¥–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫
‚úÖ **–ü—Ä–æ—Å—Ç–æ–π API** - GET –∑–∞–ø—Ä–æ—Å—ã, –Ω–µ –Ω—É–∂–Ω—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã SMS.RU

–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã SMS:
- **SMSC.ru** - –∞–Ω–∞–ª–æ–≥ SMS.RU, –Ω–µ–º–Ω–æ–≥–æ –¥–æ—Ä–æ–∂–µ
- **Uni Sender** - –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫
- **Devino Telecom** - enterprise —Ä–µ—à–µ–Ω–∏–µ
- **Message Bird** - –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π —Å–µ—Ä–≤–∏—Å

–ó–∞–º–µ–Ω–∏—Ç–µ `sms_service.py` –Ω–∞ –Ω—É–∂–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä.

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç: https://sms.ru/
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://sms.ru/api/send
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–æ–∫: https://sms.ru/statistics
- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞: https://sms.ru/pay
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞: support@sms.ru
