/*
 * ‚ú® LECTIO SPACE - SMOOTH TRANSITIONS SYSTEM
 * –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ UX –±–µ–∑ "–ª—è–∑–≥–∞" –∏ "–¥—Ä–µ–±–µ–∑–≥–∞"
 * –°–æ–∑–¥–∞–Ω–æ: 14 —è–Ω–≤–∞—Ä—è 2026
 * 
 * –ü–†–ê–í–ò–õ–û #1: –í—Å–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å transition
 * –ü–†–ê–í–ò–õ–û #2: –ò–∑–±–µ–≥–∞—Ç—å —Ä–µ–∑–∫–∏—Ö —Å–∫–∞—á–∫–æ–≤ layout (CLS)
 * –ü–†–ê–í–ò–õ–û #3: Skeleton loaders –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç–æ—Ç—ã
 * –ü–†–ê–í–ò–õ–û #4: opacity + transform –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π (GPU-—É—Å–∫–æ—Ä–µ–Ω–∏–µ)
 * –ü–†–ê–í–ò–õ–û #5: cubic-bezier –¥–ª—è "–∂–∏–≤—ã—Ö" –∫—Ä–∏–≤—ã—Ö
 */

/* ========================================
   üé≠ –ü–õ–ê–í–ù–´–ï TRANSITION –¢–û–ö–ï–ù–´
   ======================================== */

:root {
  /* –ë–∞–∑–æ–≤—ã–µ timing functions - –ù–ï linear, –∞ "–∂–∏–≤—ã–µ" –∫—Ä–∏–≤—ã–µ */
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-out-soft: cubic-bezier(0.33, 1, 0.68, 1);
  --ease-in-out-smooth: cubic-bezier(0.65, 0, 0.35, 1);
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-bounce: cubic-bezier(0.68, -0.2, 0.32, 1.2);
  
  /* Duration tokens - –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–û –î–õ–Ø –ú–ì–ù–û–í–ï–ù–ù–û–ì–û –û–¢–ö–õ–ò–ö–ê */
  --duration-instant: 80ms;    /* –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ: hover –ø–æ–¥—Å–≤–µ—Ç–∫–∞ */
  --duration-fast: 120ms;      /* –ë—ã—Å—Ç—Ä—ã–µ: –∫–ª–∏–∫–∏, —Ñ–æ–∫—É—Å */
  --duration-normal: 180ms;    /* –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è */
  --duration-slow: 250ms;      /* –ú–µ–¥–ª–µ–Ω–Ω—ã–µ: –º–æ–¥–∞–ª–∫–∏, —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
  --duration-gentle: 350ms;    /* –ú—è–≥–∫–∏–µ: —Å–ª–æ–∂–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ */
  
  /* –ì–æ—Ç–æ–≤—ã–µ transition –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ */
  --transition-hover: var(--duration-fast) var(--ease-smooth);
  --transition-focus: var(--duration-fast) var(--ease-out-soft);
  --transition-page: var(--duration-slow) var(--ease-in-out-smooth);
  --transition-modal: var(--duration-slow) var(--ease-spring);
  --transition-tabs: var(--duration-normal) var(--ease-smooth);
  --transition-content: var(--duration-normal) var(--ease-out-soft);
  --transition-skeleton: 1.5s ease-in-out infinite;
  
  /* –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è transition */
  --transition-props-visual: opacity, transform, background-color, border-color, box-shadow, color;
  --transition-props-layout: height, max-height, padding, margin;
}

/* ========================================
   üéØ –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–õ–ê–í–ù–´–ï –ü–ï–†–ï–•–û–î–´
   –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
   ======================================== */

/* –í—Å–µ –∫–Ω–æ–ø–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –ø–ª–∞–≤–Ω–æ—Å—Ç—å */
button,
.btn,
[role="button"],
input[type="submit"],
input[type="button"] {
  transition: 
    opacity var(--transition-hover),
    transform var(--transition-hover),
    background-color var(--transition-hover),
    border-color var(--transition-hover),
    box-shadow var(--transition-hover),
    color var(--transition-hover);
  will-change: transform, opacity;
}

/* –í—Å–µ —Å—Å—ã–ª–∫–∏ - –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ */
a,
.link,
[role="link"] {
  transition: 
    color var(--transition-hover),
    opacity var(--transition-hover);
}

/* Inputs - –ø–ª–∞–≤–Ω—ã–π —Ñ–æ–∫—É—Å */
input,
textarea,
select,
.form-input,
.form-textarea,
.form-select {
  transition: 
    border-color var(--transition-focus),
    box-shadow var(--transition-focus),
    background-color var(--transition-focus);
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏ - –ø–ª–∞–≤–Ω—ã–π hover */
.card,
.glass-card,
.content-card,
.section-card,
[class*="card"],
[class*="Card"] {
  transition: 
    transform var(--duration-normal) var(--ease-spring),
    box-shadow var(--duration-normal) var(--ease-smooth),
    border-color var(--transition-hover);
  will-change: transform, box-shadow;
}

/* –¢–∞–±—ã - –ø–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ */
.tab,
.profile-tab,
.student-tab,
[role="tab"],
[class*="-tab"] {
  transition: 
    color var(--transition-tabs),
    background-color var(--transition-tabs),
    border-color var(--transition-tabs),
    box-shadow var(--transition-tabs);
}

/* –ò–∫–æ–Ω–∫–∏ - –ø–ª–∞–≤–Ω—ã–π hover */
.icon,
svg,
[class*="icon"],
[class*="Icon"] {
  transition: 
    transform var(--transition-hover),
    color var(--transition-hover),
    opacity var(--transition-hover),
    fill var(--transition-hover),
    stroke var(--transition-hover);
}

/* –ë–µ–π–¥–∂–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã */
.badge,
.status,
[class*="badge"],
[class*="Badge"],
[class*="status"] {
  transition: 
    background-color var(--transition-hover),
    color var(--transition-hover),
    transform var(--transition-hover);
}

/* ========================================
   üì¶ –ê–ù–ò–ú–ê–¶–ò–ò –ü–û–Ø–í–õ–ï–ù–ò–Ø –ö–û–ù–¢–ï–ù–¢–ê
   –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ —Ä–µ–∑–∫–æ–≥–æ
   ======================================== */

/* Fade in –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
@keyframes smoothFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Slide + Fade –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü –∏ —Å–µ–∫—Ü–∏–π */
@keyframes smoothSlideUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes smoothSlideDown {
  from {
    opacity: 0;
    transform: translateY(-16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes smoothSlideLeft {
  from {
    opacity: 0;
    transform: translateX(16px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes smoothSlideRight {
  from {
    opacity: 0;
    transform: translateX(-16px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Scale + Fade –¥–ª—è –º–æ–¥–∞–ª–æ–∫ */
@keyframes smoothScaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes smoothScaleOut {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

/* Backdrop –ø–æ—è–≤–ª–µ–Ω–∏–µ */
@keyframes backdropFadeIn {
  from {
    opacity: 0;
    backdrop-filter: blur(0);
  }
  to {
    opacity: 1;
    backdrop-filter: blur(12px);
  }
}

/* –ü—É–ª—å—Å–∞—Ü–∏—è –¥–ª—è loading */
@keyframes smoothPulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

/* ========================================
   ü¶¥ SKELETON LOADERS
   –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏
   ======================================== */

@keyframes skeletonShimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton,
.loading-skeleton,
[class*="skeleton"] {
  background: linear-gradient(
    90deg,
    var(--bg-surface) 0%,
    rgba(241, 245, 249, 0.5) 20%,
    rgba(241, 245, 249, 0.8) 40%,
    rgba(241, 245, 249, 0.5) 60%,
    var(--bg-surface) 80%,
    var(--bg-surface) 100%
  );
  background-size: 200% 100%;
  animation: skeletonShimmer 1.8s ease-in-out infinite;
  border-radius: var(--radius-md);
}

/* Skeleton variants */
.skeleton-text {
  height: 1em;
  border-radius: var(--radius-sm);
}

.skeleton-title {
  height: 1.5em;
  width: 60%;
  border-radius: var(--radius-sm);
}

.skeleton-avatar {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-full);
}

.skeleton-card {
  min-height: 120px;
  border-radius: var(--radius-xl);
}

.skeleton-button {
  height: 44px;
  width: 120px;
  border-radius: var(--radius-lg);
}

/* ========================================
   üé™ –ö–õ–ê–°–°–´ –ü–õ–ê–í–ù–´–• –ê–ù–ò–ú–ê–¶–ò–ô
   –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º
   ======================================== */

/* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
.animate-page-enter {
  animation: smoothSlideUp var(--duration-slow) var(--ease-out-soft) forwards;
}

/* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
.animate-content {
  animation: smoothFadeIn var(--duration-normal) var(--ease-smooth) forwards;
}

/* –ö–∞—Å–∫–∞–¥–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ */
.animate-stagger > * {
  animation: smoothSlideUp var(--duration-normal) var(--ease-out-soft) forwards;
  opacity: 0;
}

.animate-stagger > *:nth-child(1) { animation-delay: 0ms; }
.animate-stagger > *:nth-child(2) { animation-delay: 50ms; }
.animate-stagger > *:nth-child(3) { animation-delay: 100ms; }
.animate-stagger > *:nth-child(4) { animation-delay: 150ms; }
.animate-stagger > *:nth-child(5) { animation-delay: 200ms; }
.animate-stagger > *:nth-child(6) { animation-delay: 250ms; }
.animate-stagger > *:nth-child(7) { animation-delay: 300ms; }
.animate-stagger > *:nth-child(8) { animation-delay: 350ms; }
.animate-stagger > *:nth-child(9) { animation-delay: 400ms; }
.animate-stagger > *:nth-child(10) { animation-delay: 450ms; }

/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
.animate-modal-enter {
  animation: smoothScaleIn var(--duration-slow) var(--ease-spring) forwards;
}

.animate-modal-exit {
  animation: smoothScaleOut var(--duration-normal) var(--ease-smooth) forwards;
}

/* Backdrop */
.animate-backdrop {
  animation: backdropFadeIn var(--duration-slow) var(--ease-smooth) forwards;
}

/* Loading pulse */
.animate-loading {
  animation: smoothPulse 1.5s var(--ease-in-out-smooth) infinite;
}

/* Tabs content switching */
.animate-tab-content {
  animation: smoothFadeIn var(--duration-normal) var(--ease-smooth) forwards;
}

/* ========================================
   üîÑ –°–û–°–¢–û–Ø–ù–ò–Ø –ü–ï–†–ï–•–û–î–û–í
   –î–ª—è —É—Å–ª–æ–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
   ======================================== */

/* Entering state */
.is-entering {
  opacity: 0;
  transform: translateY(12px);
}

.is-entered {
  opacity: 1;
  transform: translateY(0);
  transition: 
    opacity var(--duration-normal) var(--ease-out-soft),
    transform var(--duration-normal) var(--ease-out-soft);
}

/* Exiting state */
.is-exiting {
  opacity: 0;
  transform: translateY(-8px);
  transition: 
    opacity var(--duration-fast) var(--ease-smooth),
    transform var(--duration-fast) var(--ease-smooth);
}

/* Hidden but in DOM */
.is-hidden {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transition: 
    opacity var(--duration-fast) var(--ease-smooth),
    visibility 0ms var(--duration-fast);
}

.is-visible {
  opacity: 1;
  pointer-events: auto;
  visibility: visible;
  transition: 
    opacity var(--duration-normal) var(--ease-smooth),
    visibility 0ms 0ms;
}

/* ========================================
   üí´ HOVER –≠–§–§–ï–ö–¢–´ - –ú–Ø–ì–ö–ò–ï
   –£–±–∏—Ä–∞–µ–º —Ä–µ–∑–∫–∏–µ –ø—Ä—ã–∂–∫–∏
   ======================================== */

/* –ú—è–≥–∫–∏–π lift —ç—Ñ—Ñ–µ–∫—Ç */
.hover-lift {
  transition: transform var(--duration-normal) var(--ease-spring),
              box-shadow var(--duration-normal) var(--ease-smooth);
}

.hover-lift:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

/* –û—á–µ–Ω—å –º—è–≥–∫–∏–π lift */
.hover-lift-soft:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

/* –ú—è–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ */
.hover-grow {
  transition: transform var(--duration-normal) var(--ease-spring);
}

.hover-grow:hover {
  transform: scale(1.02);
}

/* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ (glow) */
.hover-glow {
  transition: box-shadow var(--duration-normal) var(--ease-smooth);
}

.hover-glow:hover {
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.15), var(--shadow-md);
}

/* ========================================
   üìê LAYOUT SHIFT PREVENTION
   –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑–∫–∏–µ —Å–∫–∞—á–∫–∏
   ======================================== */

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π –¥–ª—è loading */
.content-loading-container {
  min-height: 200px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* –§–∏–∫—Å–∞—Ü–∏—è –≤—ã—Å–æ—Ç—ã –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö */
.height-transition {
  transition: 
    height var(--duration-normal) var(--ease-smooth),
    max-height var(--duration-normal) var(--ease-smooth);
  overflow: hidden;
}

/* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ/—Å–∫—Ä—ã—Ç–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º layout */
.fade-height-enter {
  opacity: 0;
  max-height: 0;
  overflow: hidden;
  transition: 
    opacity var(--duration-normal) var(--ease-smooth),
    max-height var(--duration-normal) var(--ease-smooth);
}

.fade-height-entered {
  opacity: 1;
  max-height: 1000px; /* –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ */
}

/* ========================================
   üé¨ –ú–û–î–ê–õ–ö–ò –ò –û–í–ï–†–õ–ï–ò
   ======================================== */

/* Backdrop —Å –ø–ª–∞–≤–Ω—ã–º —Ä–∞–∑–º—ã—Ç–∏–µ–º */
.smooth-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.3);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  opacity: 0;
  transition: 
    opacity var(--duration-slow) var(--ease-smooth),
    backdrop-filter var(--duration-slow) var(--ease-smooth);
}

.smooth-backdrop.is-active {
  opacity: 1;
}

/* Modal —Å –ø–ª–∞–≤–Ω—ã–º –ø–æ—è–≤–ª–µ–Ω–∏–µ–º */
.smooth-modal {
  opacity: 0;
  transform: scale(0.96) translateY(8px);
  transition: 
    opacity var(--duration-slow) var(--ease-spring),
    transform var(--duration-slow) var(--ease-spring);
}

.smooth-modal.is-active {
  opacity: 1;
  transform: scale(1) translateY(0);
}

/* ========================================
   üì± –ê–î–ê–ü–¢–ê–¶–ò–Ø –î–õ–Ø prefers-reduced-motion
   –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .skeleton,
  .loading-skeleton,
  [class*="skeleton"] {
    animation: none;
    background: var(--bg-surface);
  }
}

/* ========================================
   üìä LOADING STATES
   –ü–ª–∞–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
   ======================================== */

/* Loading overlay */
.loading-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(4px);
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--duration-normal) var(--ease-smooth);
  z-index: 10;
  border-radius: inherit;
}

.loading-overlay.is-loading {
  opacity: 1;
  pointer-events: auto;
}

/* Spinner */
@keyframes smoothSpin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--border-light);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: smoothSpin 0.8s linear infinite;
}

.spinner-lg {
  width: 40px;
  height: 40px;
  border-width: 3px;
}

/* ========================================
   üé® –£–¢–ò–õ–ò–¢–´ –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–û–í
   ======================================== */

/* PERF: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ transition –∫–ª–∞—Å—Å—ã - –∏—Å–ø–æ–ª—å–∑—É—é—Ç GPU-—É—Å–∫–æ—Ä–µ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ */
.smooth { 
  transition: 
    transform var(--transition-hover), 
    opacity var(--transition-hover),
    background-color var(--transition-hover),
    border-color var(--transition-hover);
}
.smooth-slow { 
  transition: 
    transform var(--transition-page), 
    opacity var(--transition-page),
    background-color var(--transition-page);
}
.smooth-content { 
  transition: 
    transform var(--transition-content), 
    opacity var(--transition-content);
}

/* Delay utilities */
.delay-50 { transition-delay: 50ms; }
.delay-100 { transition-delay: 100ms; }
.delay-150 { transition-delay: 150ms; }
.delay-200 { transition-delay: 200ms; }
.delay-300 { transition-delay: 300ms; }

/* Will-change hints */
.will-transform { will-change: transform; }
.will-opacity { will-change: opacity; }
.will-both { will-change: transform, opacity; }
