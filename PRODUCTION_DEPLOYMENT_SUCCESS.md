# üöÄ Production Deployment - Complete

**–î–∞—Ç–∞:** 3 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û –ó–ê–î–ï–ü–õ–û–ï–ù–û

---

## üì¶ –ó–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ production

### Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è `0004_homework_published_at_homework_status` –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `status` (draft/published/archived) –≤ –º–æ–¥–µ–ª—å Homework
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `published_at` –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- ‚úÖ API endpoint `/api/homework/homeworks/upload-file/` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä `status='published'` –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –î–ó)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Drive —á–µ—Ä–µ–∑ `GoogleDriveManager`

### Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å" —Å –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º –∏ preview
- ‚úÖ FileUploader –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å drag-and-drop (267.89 kB main.js)
- ‚úÖ React.memo –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è SingleChoice –∏ MultipleChoice –≤–æ–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω CSS –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è input –ø–æ–ª–µ–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è FileUploader –≤ HotspotQuestion (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è FileUploader –≤ ListeningQuestion (–∞—É–¥–∏–æ)

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–ª–æ–∫–∞–ª—å–Ω–æ):
```powershell
# –°–±–æ—Ä–∫–∞ frontend
cd frontend
npm run build  # ‚úÖ –£—Å–ø–µ—à–Ω–æ: 267.89 kB

# –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
git add .
git commit -m "feat: homework publish + file upload + bug fixes"
git push origin main  # ‚úÖ Commit: 60a1faf
```

### 2. –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ frontend
scp -r build/* tp:/var/www/teaching_panel/frontend/
# ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: main.0c9bb5d0.js (1.1M), main.3bba0af5.css (216K)

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ backend
ssh tp "cd /var/www/teaching_panel && git pull origin main"
# ‚úÖ Fast-forward: 3864440..60a1faf

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
ssh tp "cd /var/www/teaching_panel/teaching_panel && \
        source ../venv/bin/activate && \
        python manage.py migrate homework"
# ‚úÖ No migrations to apply (—É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞)

# –†–µ—Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞
ssh tp "sudo systemctl restart teaching_panel"
# ‚úÖ Active: active (running), 5 workers
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### Backend:
```bash
# API –¥–æ—Å—Ç—É–ø–µ–Ω
curl http://127.0.0.1:8000/api/homework/
# ‚úÖ 401 Unauthorized (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è - –Ω–æ—Ä–º–∞)

# –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
curl http://127.0.0.1/
# ‚úÖ 200 OK
```

### Frontend:
```bash
# –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø
curl http://72.56.81.163/
# ‚úÖ 200 OK, HTML —Å main.0c9bb5d0.js

# –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ
ls /var/www/teaching_panel/frontend/static/js/
# ‚úÖ main.0c9bb5d0.js (1.1M) - Dec 3 09:18
# ‚úÖ main.3bba0af5.css (216K) - Dec 3 09:18
```

### –ö–æ–¥:
```bash
# upload-file endpoint
grep 'upload-file' homework/views.py
# ‚úÖ Line 75: @action(detail=False, methods=['post'], url_path='upload-file')

# status field
grep 'status.*models.CharField' homework/models.py
# ‚úÖ status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='draft')
# ‚úÖ published_at = models.DateTimeField(null=True, blank=True)
```

---

## üéØ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ production

### 1. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π:
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üì¢ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å" –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –î–ó
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å preview –≤–æ–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏ –≤ preview
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π (–º–∏–Ω. 1 –≤–æ–ø—Ä–æ—Å)
- ‚úÖ Badge –º–µ–Ω—è–µ—Ç—Å—è —Å "–ß–µ—Ä–Ω–æ–≤–∏–∫" –Ω–∞ "–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ"

### 2. –í–∏–¥–∏–º–æ—Å—Ç—å –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:
- ‚úÖ –°—Ç—É–¥–µ–Ω—Ç—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –î–ó (`status='published'`)
- ‚úÖ –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ —Å–∫—Ä—ã—Ç—ã –æ—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ Django QuerySet

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤:
- ‚úÖ Drag-and-drop –∑–æ–Ω–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∞—É–¥–∏–æ
- ‚úÖ API endpoint: `POST /api/homework/homeworks/upload-file/`
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Google Drive –≤ –ø–∞–ø–∫—É —É—á–∏—Ç–µ–ª—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤:
  - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: JPG, PNG, GIF, WebP
  - –ê—É–¥–∏–æ: MP3, WAV, OGG, MP4, M4A
- ‚úÖ –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä: 50 MB
- ‚úÖ –ü—Ä–µ–≤—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ö–Ω–æ–ø–∫–∏ "–ó–∞–º–µ–Ω–∏—Ç—å" –∏ "–£–¥–∞–ª–∏—Ç—å"

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º:
- ‚úÖ React.memo –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∏—à–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã
- ‚úÖ –í–≤–æ–¥ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è –ø–ª–∞–≤–Ω—ã–π (–±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Ñ–æ–∫—É—Å–∞)
- ‚úÖ CSS –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ overflow

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–µ–ø–ª–æ—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –ö–æ–º–º–∏—Ç | 60a1faf |
| –ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤ | 12 |
| –î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫ | +590 |
| –£–¥–∞–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫ | -25 |
| Frontend —Ä–∞–∑–º–µ—Ä | 267.89 kB (main.js) |
| CSS —Ä–∞–∑–º–µ—Ä | 37.41 kB (main.css) |
| –ú–∏–≥—Ä–∞—Ü–∏—è | 0004_homework_published_at_homework_status |
| –í—Ä–µ–º—è –¥–µ–ø–ª–æ—è | ~3 –º–∏–Ω—É—Ç—ã |

---

## üåê Production URLs

- **Frontend:** http://72.56.81.163/
- **API:** http://72.56.81.163/api/
- **Admin:** http://72.56.81.163/admin/

---

## üìù –°–µ—Ä–≤–∏—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
‚óè teaching_panel.service - Teaching Panel Gunicorn Service
  Status: ‚úÖ active (running)
  Workers: 5
  Memory: 194.1M
  
‚óè telegram_bot.service - Teaching Panel Telegram Bot
  Status: ‚úÖ active (running)
  
‚óè celery-worker.service - Teaching Panel Celery Worker
  Status: ‚úÖ active (running)
  
‚óè celery-beat.service - Teaching Panel Celery Beat Scheduler
  Status: ‚úÖ active (running)
```

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ production

### 1. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –î–ó:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://72.56.81.163/
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —É—á–∏—Ç–µ–ª—å
3. Homework ‚Üí –°–æ–∑–¥–∞—Ç—å –î–ó
4. –î–æ–±–∞–≤—å—Ç–µ –≤–æ–ø—Ä–æ—Å—ã
5. –ù–∞–∂–º–∏—Ç–µ "üì¢ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"
6. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ‚Üí Preview ‚Üí –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚Üí Badge "–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ"

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
1. –°–æ–∑–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å HOTSPOT
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∑–æ–Ω—É –∑–∞–≥—Ä—É–∑–∫–∏
3. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä ‚Üí –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Üí –ö–Ω–æ–ø–∫–∏ "–ó–∞–º–µ–Ω–∏—Ç—å"/"–£–¥–∞–ª–∏—Ç—å"

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ:
1. –°–æ–∑–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å LISTENING
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ MP3 —Ñ–∞–π–ª
3. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä ‚Üí –ê—É–¥–∏–æ-–ø–ª–µ–µ—Ä ‚Üí –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 4. –í–∏–¥–∏–º–æ—Å—Ç—å –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞:
1. –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –î–ó –∫–∞–∫ —É—á–∏—Ç–µ–ª—å
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Å—Ç—É–¥–µ–Ω—Ç –∏–∑ —Ç–æ–π –∂–µ –≥—Ä—É–ø–ø—ã
3. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –î–ó –≤–∏–¥–Ω–æ –≤ —Å–ø–∏—Å–∫–µ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### Google Drive:
- ‚úÖ `GoogleDriveManager` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –ü–∞–ø–∫–∏ —É—á–∏—Ç–µ–ª–µ–π —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: `teacher_{id}_{name}/`
- ‚ö†Ô∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `gdrive_token.json` –≤–∞–ª–∏–¥–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `GDRIVE_RECORDINGS_FOLDER_ID` –≤ settings.py

### Telegram Bot:
- ‚úÖ –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω: `telegram_bot.service`
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `TELEGRAM_BOT_TOKEN` –≤ `/var/www/teaching_panel/.env`
- ‚ö†Ô∏è –°—Ç—É–¥–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã —Å–≤—è–∑–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã —á–µ—Ä–µ–∑ `/link` –≤ –±–æ—Ç–µ

### Security:
- ‚ö†Ô∏è Production —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ HTTPS (`SECURE_SSL_REDIRECT=False`)
- ‚ö†Ô∏è reCAPTCHA –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏
- ‚ö†Ô∏è Cookies –Ω–µ secure (`SESSION_COOKIE_SECURE=False`)
- üí° –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

---

## üéâ –ò—Ç–æ–≥

**–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã –Ω–∞ production!**

‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –î–ó —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –§–∏–ª—å—Ç—Ä –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ Google Drive —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ Frontend –æ–±–Ω–æ–≤–ª–µ–Ω  
‚úÖ Backend –æ–±–Ω–æ–≤–ª–µ–Ω  
‚úÖ –°–µ—Ä–≤–∏—Å—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã  

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

---

**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–î–∞—Ç–∞ –¥–µ–ø–ª–æ—è:** 3 –¥–µ–∫–∞–±—Ä—è 2025, 09:20 UTC  
**Commit:** 60a1faf
